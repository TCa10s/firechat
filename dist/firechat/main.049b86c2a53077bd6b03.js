(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.e)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.g)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.6.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var c=n("SpAZ");function l(t=Number.POSITIVE_INFINITY){return s(c.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return _a}),n.d(e,"b",function(){return ba}),n.d(e,"c",function(){return wa}),n.d(e,"d",function(){return pu}),n.d(e,"e",function(){return cu}),n.d(e,"f",function(){return gs}),n.d(e,"g",function(){return xa}),n.d(e,"h",function(){return ws}),n.d(e,"i",function(){return dr}),n.d(e,"j",function(){return ma}),n.d(e,"k",function(){return Gi}),n.d(e,"l",function(){return rn}),n.d(e,"m",function(){return uo}),n.d(e,"n",function(){return Ms}),n.d(e,"o",function(){return Us}),n.d(e,"p",function(){return Aa}),n.d(e,"q",function(){return Xs}),n.d(e,"r",function(){return iu}),n.d(e,"s",function(){return Ua}),n.d(e,"t",function(){return En}),n.d(e,"u",function(){return Oa}),n.d(e,"v",function(){return Ta}),n.d(e,"w",function(){return Es}),n.d(e,"x",function(){return _s}),n.d(e,"y",function(){return mr}),n.d(e,"z",function(){return Ts}),n.d(e,"A",function(){return cr}),n.d(e,"B",function(){return Ws}),n.d(e,"C",function(){return Qa}),n.d(e,"D",function(){return Cs}),n.d(e,"E",function(){return Os}),n.d(e,"F",function(){return Js}),n.d(e,"G",function(){return B}),n.d(e,"H",function(){return ou}),n.d(e,"I",function(){return nu}),n.d(e,"J",function(){return w}),n.d(e,"K",function(){return eu}),n.d(e,"L",function(){return fu}),n.d(e,"M",function(){return $a}),n.d(e,"N",function(){return Sa}),n.d(e,"O",function(){return Wi}),n.d(e,"P",function(){return ns}),n.d(e,"Q",function(){return I}),n.d(e,"R",function(){return ar}),n.d(e,"S",function(){return zn}),n.d(e,"T",function(){return jn}),n.d(e,"U",function(){return Pn}),n.d(e,"V",function(){return Ln}),n.d(e,"W",function(){return Fn}),n.d(e,"X",function(){return Vn}),n.d(e,"Y",function(){return Mn}),n.d(e,"Z",function(){return Zo}),n.d(e,"ab",function(){return hu}),n.d(e,"bb",function(){return Jo}),n.d(e,"cb",function(){return ts}),n.d(e,"db",function(){return Rn}),n.d(e,"eb",function(){return Q}),n.d(e,"fb",function(){return vo}),n.d(e,"gb",function(){return jo}),n.d(e,"hb",function(){return Do}),n.d(e,"ib",function(){return No}),n.d(e,"jb",function(){return Xo}),n.d(e,"kb",function(){return Nt}),n.d(e,"lb",function(){return m}),n.d(e,"mb",function(){return Nn}),n.d(e,"nb",function(){return lo}),n.d(e,"ob",function(){return Ct}),n.d(e,"pb",function(){return ds}),n.d(e,"qb",function(){return ti}),n.d(e,"rb",function(){return Eo}),n.d(e,"sb",function(){return Uo}),n.d(e,"tb",function(){return ot}),n.d(e,"ub",function(){return ft}),n.d(e,"vb",function(){return S}),n.d(e,"wb",function(){return A}),n.d(e,"xb",function(){return ct}),n.d(e,"yb",function(){return dt}),n.d(e,"zb",function(){return To}),n.d(e,"Ab",function(){return xo}),n.d(e,"Bb",function(){return Ao}),n.d(e,"Cb",function(){return So}),n.d(e,"Db",function(){return ko}),n.d(e,"Eb",function(){return Ze}),n.d(e,"Fb",function(){return vn}),n.d(e,"Gb",function(){return tn}),n.d(e,"Hb",function(){return va}),n.d(e,"Ib",function(){return Ro}),n.d(e,"Jb",function(){return Fo}),n.d(e,"Kb",function(){return Oo}),n.d(e,"Lb",function(){return da}),n.d(e,"Mb",function(){return pa}),n.d(e,"Nb",function(){return Yt}),n.d(e,"Ob",function(){return lt}),n.d(e,"Pb",function(){return Io}),n.d(e,"Qb",function(){return Ko}),n.d(e,"Rb",function(){return Go}),n.d(e,"Sb",function(){return Qo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("7o/Q");function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function y(t){for(let e in t)if(t[e]===y)return e;throw Error("Could not find renamed property on target object.")}function g(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function m(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(m).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function v(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const b=y({__forward_ref__:y});function w(t){return t.__forward_ref__=w,t.toString=function(){return m(this())},t}function _(t){return E(t)?t():t}function E(t){return"function"==typeof t&&t.hasOwnProperty(b)&&t.__forward_ref__===w}class I extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function T(t){return"string"==typeof t?t:null==t?"":String(t)}function O(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():T(t)}function C(t,e){const n=e?` in ${e}`:"";throw new I("201",`No provider for ${O(t)} found${n}`)}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function A(t){return{providers:t.providers||[],imports:t.imports||[]}}function x(t){return k(t,N)||k(t,R)}function k(t,e){return t.hasOwnProperty(e)?t[e]:null}function D(t){return t&&(t.hasOwnProperty(j)||t.hasOwnProperty(P))?t[j]:null}const N=y({"\u0275prov":y}),j=y({"\u0275inj":y}),R=y({ngInjectableDef:y}),P=y({ngInjectorDef:y});var V=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let F;function M(t){const e=F;return F=t,e}function L(t,e,n){const r=x(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&V.Optional?null:void 0!==e?e:void C(m(t),"Injector")}function U(t){return{toString:t}.toString()}var q=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),B=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const H="undefined"!=typeof globalThis&&globalThis,z="undefined"!=typeof window&&window,K="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,G="undefined"!=typeof global&&global,Q=H||G||z||K,W={},Y=[],$=[],X=y({"\u0275cmp":y}),Z=y({"\u0275dir":y}),J=y({"\u0275pipe":y}),tt=y({"\u0275mod":y}),et=y({"\u0275loc":y}),nt=y({"\u0275fac":y}),rt=y({__NG_ELEMENT_ID__:y});let it=0;function ot(t){return U(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===q.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||$,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||B.Emulated,id:"c",styles:t.styles||$,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=it++,n.inputs=ht(t.inputs,e),n.outputs=ht(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(st):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(at):null,n})}function st(t){return pt(t)||function(t){return t[Z]||null}(t)}function at(t){return function(t){return t[J]||null}(t)}const ut={};function ct(t){const e={type:t.type,bootstrap:t.bootstrap||$,declarations:t.declarations||$,imports:t.imports||$,exports:t.exports||$,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&U(()=>{ut[t.id]=t.type}),e}function lt(t,e){return U(()=>{const n=yt(t,!0);n.declarations=e.declarations||$,n.imports=e.imports||$,n.exports=e.exports||$})}function ht(t,e){if(null==t)return W;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ft=ot;function dt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function pt(t){return t[X]||null}function yt(t,e){const n=t[tt]||null;if(!n&&!0===e)throw new Error(`Type ${m(t)} does not have '\u0275mod' property.`);return n}const gt=20,mt=10;function vt(t){return Array.isArray(t)&&"object"==typeof t[1]}function bt(t){return Array.isArray(t)&&!0===t[1]}function wt(t){return 0!=(8&t.flags)}function _t(t){return 2==(2&t.flags)}function Et(t){return 1==(1&t.flags)}function It(t){return null!==t.template}function Tt(t,e){return t.hasOwnProperty(nt)?t[nt]:null}class Ot{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ct(){return St}function St(t){return t.type.prototype.ngOnChanges&&(t.setInput=xt),At}function At(){const t=kt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===W)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function xt(t,e,n,r){const i=kt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:W,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Ot(u&&u.currentValue,e,s===W),t[r]=e}function kt(t){return t.__ngSimpleChanges__||null}let Dt;function Nt(t){Dt=t}function jt(t){return!!t.listen}Ct.ngInherit=!0;const Rt={createRenderer:(t,e)=>void 0!==Dt?Dt:"undefined"!=typeof document?document:void 0};function Pt(t){for(;Array.isArray(t);)t=t[0];return t}function Vt(t,e){return Pt(e[t])}function Ft(t,e){return Pt(e[t.index])}function Mt(t,e){return t.data[e]}function Lt(t,e){const n=e[t];return vt(n)?n:n[0]}function Ut(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function qt(t){return 128==(128&t[2])}function Bt(t,e){return null==e?null:t[e]}function Ht(t){t[18]=0}function zt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Kt={lFrame:he(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Gt(){return Kt.bindingsEnabled}function Qt(){return Kt.lFrame.lView}function Wt(){return Kt.lFrame.tView}function Yt(t){Kt.lFrame.contextLView=t}function $t(){let t=Xt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Xt(){return Kt.lFrame.currentTNode}function Zt(t,e){const n=Kt.lFrame;n.currentTNode=t,n.isParent=e}function Jt(){return Kt.lFrame.isParent}function te(){return Kt.isInCheckNoChangesMode}function ee(t){Kt.isInCheckNoChangesMode=t}function ne(){const t=Kt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function re(){return Kt.lFrame.bindingIndex++}function ie(t,e){const n=Kt.lFrame;n.bindingIndex=n.bindingRootIndex=t,oe(e)}function oe(t){Kt.lFrame.currentDirectiveIndex=t}function se(t){Kt.lFrame.currentQueryIndex=t}function ae(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ue(t,e,n){if(n&V.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&V.Host||(r=ae(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Kt.lFrame=le();return r.currentTNode=e,r.lView=t,!0}function ce(t){const e=le(),n=t[1];Kt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function le(){const t=Kt.lFrame,e=null===t?null:t.child;return null===e?he(t):e}function he(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function fe(){const t=Kt.lFrame;return Kt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const de=fe;function pe(){const t=fe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ye(){return Kt.lFrame.selectedIndex}function ge(t){Kt.lFrame.selectedIndex=t}function me(){const t=Kt.lFrame;return Mt(t.tView,t.selectedIndex)}function ve(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function be(t,e,n){Ee(t,e,3,n)}function we(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function _e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Ie(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Ie(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Te=-1;class Oe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ce(t,e,n){const r=jt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ae(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Se(t){return 3===t||4===t||6===t}function Ae(t){return 64===t.charCodeAt(0)}function xe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ke(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ke(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function De(t){return t!==Te}function Ne(t){return 32767&t}function je(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Re=!0;function Pe(t){const e=Re;return Re=t,e}let Ve=0;function Fe(t,e){const n=Le(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Me(r.data,t),Me(e,null),Me(r.blueprint,null));const i=Ue(t,e),o=t.injectorIndex;if(De(i)){const t=Ne(i),n=je(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Me(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Le(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Te;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Te}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(rt)&&(r=n[rt]),null==r&&(r=n[rt]=Ve++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Be(t,e,n){if(n&V.Optional)return t;C(e,"NodeInjector")}function He(t,e,n,r){if(n&V.Optional&&void 0===r&&(r=null),0==(n&(V.Self|V.Host))){const i=t[9],o=M(void 0);try{return i?i.get(e,r,n&V.Optional):L(e,r,n&V.Optional)}finally{M(o)}}return Be(r,e,n)}function ze(t,e,n,r=V.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(rt)?t[rt]:void 0;return"number"==typeof e?e>=0?255&e:Ge:e}(n);if("function"==typeof o){if(!ue(e,t,r))return r&V.Host?Be(i,n,r):He(e,n,r,i);try{const t=o();if(null!=t||r&V.Optional)return t;C(n)}finally{de()}}else if("number"==typeof o){let i=null,s=Le(t,e),a=Te,u=r&V.Host?e[16][6]:null;for((-1===s||r&V.SkipSelf)&&(a=-1===s?Ue(t,e):e[s+8],a!==Te&&$e(r,!1)?(i=e[1],s=Ne(a),e=je(a,e)):s=-1);-1!==s;){const t=e[1];if(Ye(o,s,t.data)){const t=Qe(s,e,n,i,r,u);if(t!==Ke)return t}a=e[s+8],a!==Te&&$e(r,e[1].data[s+8]===u)&&Ye(o,s,e)?(i=t,s=Ne(a),e=je(a,e)):s=-1}}}return He(e,n,r,i)}const Ke={};function Ge(){return new Xe($t(),Qt())}function Qe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&It(t)&&t.type===n)return u}return null}(a,s,n,null==r?_t(a)&&Re:r!=s&&0!=(3&a.type),i&V.Host&&o===a);return null!==u?We(e,s,u,a):Ke}function We(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Oe){const s=i;s.resolving&&function(t,e){throw new I("200",`Circular dependency in DI detected for ${t}`)}(O(o[n]));const a=Pe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?M(s.injectImpl):null;ue(t,r,V.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=St(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&M(u),Pe(a),s.resolving=!1,de()}}return i}function Ye(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $e(t,e){return!(t&V.Self||t&V.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ze(this._tNode,this._lView,t,void 0,e)}}function Ze(t){return U(()=>{const e=t.prototype.constructor,n=e[nt]||Je(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[nt]||Je(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Je(t){return E(t)?()=>{const e=Je(_(t));return e&&e()}:Tt(t)}function tn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Se(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}($t(),t)}const en="__parameters__";function nn(t,e,n){return U(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(en)?t[en]:Object.defineProperty(t,en,{value:[]})[en];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class rn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=S({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}function on(t,e){t.forEach(t=>Array.isArray(t)?on(t,e):e(t))}function sn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function an(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function un(t,e,n){let r=ln(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function cn(t,e){const n=ln(t,e);if(n>=0)return t[1|n]}function ln(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const hn={},fn=/\n/gm,dn="__source",pn=y({provide:String,useValue:y});let yn;function gn(t){const e=yn;return yn=t,e}function mn(t,e=V.Default){if(void 0===yn)throw new Error("inject() must be called from an injection context");return null===yn?L(t,void 0,e):yn.get(t,e&V.Optional?null:void 0,e)}function vn(t,e=V.Default){return(F||mn)(_(t),e)}function bn(t){const e=[];for(let n=0;n<t.length;n++){const r=_(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=V.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(vn(t,n))}else e.push(vn(r))}return e}function wn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const _n=wn(nn("Inject",t=>({token:t})),-1),En=wn(nn("Optional"),8),In=wn(nn("SkipSelf"),4);let Tn;function On(t){var e;return(null===(e=function(){if(void 0===Tn&&(Tn=null,Q.trustedTypes))try{Tn=Q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Tn}())||void 0===e?void 0:e.createHTML(t))||t}class Cn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Sn extends Cn{getTypeName(){return"HTML"}}class An extends Cn{getTypeName(){return"Style"}}class xn extends Cn{getTypeName(){return"Script"}}class kn extends Cn{getTypeName(){return"URL"}}class Dn extends Cn{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof Cn?t.changingThisBreaksApplicationSecurity:t}function jn(t,e){const n=Rn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Rn(t){return t instanceof Cn&&t.getTypeName()||null}function Pn(t){return new Sn(t)}function Vn(t){return new An(t)}function Fn(t){return new xn(t)}function Mn(t){return new kn(t)}function Ln(t){return new Dn(t)}class Un{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(On(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=On(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=On(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Bn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zn(t){return(t=String(t)).match(Bn)||t.match(Hn)?t:"unsafe:"+t}function Kn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Gn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Qn=Kn("area,br,col,hr,img,wbr"),Wn=Kn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yn=Kn("rp,rt"),$n=Gn(Yn,Wn),Xn=Gn(Qn,Gn(Wn,Kn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gn(Yn,Kn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$n),Zn=Kn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jn=Kn("srcset"),tr=Gn(Zn,Jn,Kn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Kn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),er=Kn("script,style,template");class nr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Xn.hasOwnProperty(e))return this.sanitizedSomething=!0,!er.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!tr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Zn[o]&&(s=zn(s)),Jn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>zn(t.trim())).join(", ")),this.buf.push(" ",e,'="',or(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Xn.hasOwnProperty(e)&&!Qn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(or(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const rr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ir=/([^\#-~ |!])/g;function or(t){return t.replace(/&/g,"&amp;").replace(rr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ir,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let sr;function ar(t,e){let n=null;try{sr=sr||function(t){const e=new qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(On(""),"text/html")}catch(t){return!1}}()?new Un(e):e}(t);let r=e?String(e):"";n=sr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=sr.getInertBodyElement(r)}while(r!==o);return On((new nr).sanitizeChildren(ur(n)||n))}finally{if(n){const t=ur(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ur(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var cr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function lr(t){return t.ngDebugContext}function hr(t){return t.ngOriginalError}function fr(t,...e){t.error(...e)}class dr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||fr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?lr(t)?lr(t):this._findContext(hr(t)):null}_findOriginalError(t){let e=hr(t);for(;e&&hr(e);)e=hr(e);return e}}function pr(t,e){t.__ngContext__=e}const yr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Q))();function gr(t){return t instanceof Function?t():t}var mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function vr(t,e){return(void 0)(t,e)}function br(t){const e=t[3];return bt(e)?e[3]:e}function wr(t){return Er(t[13])}function _r(t){return Er(t[4])}function Er(t){for(;null!==t&&!bt(t);)t=t[4];return t}function Ir(t,e,n,r,i){if(null!=r){let o,s=!1;bt(r)?o=r:vt(r)&&(s=!0,r=r[0]);const a=Pt(r);0===t&&null!==n?null==i?kr(e,n,a):xr(e,n,a,i||null,!0):1===t&&null!==n?xr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Nr(t,e);r&&function(t,e,n,r){jt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Pt(n)&&Ir(e,t,r,o,i);for(let s=mt;s<n.length;s++){const i=n[s];Mr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Tr(t,e,n){return jt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Or(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,zt(i,-1)),n.splice(r,1)}function Cr(t,e){if(t.length<=mt)return;const n=mt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Or(o,r),e>0&&(t[n-1][4]=r[4]);const s=an(t,mt+e);Mr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Sr(t,e){if(!(256&e[2])){const n=e[11];jt(n)&&n.destroyNode&&Mr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ar(t[1],t);for(;e;){let n=null;if(vt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)vt(e)&&Ar(e[1],e),e=e[3];null===e&&(e=t),vt(e)&&Ar(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ar(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Oe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Pt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&jt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&bt(e[3])){n!==e[3]&&Or(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xr(t,e,n,r,i){jt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function kr(t,e,n){jt(t)?t.appendChild(e,n):e.appendChild(n)}function Dr(t,e,n,r,i){null!==r?xr(t,e,n,r,i):kr(t,e,n)}function Nr(t,e){return jt(t)?t.parentNode(e):e.parentNode}function jr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===B.None||e===B.Emulated)return null}return Ft(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Ft(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Dr(o,i,n[a],s,!1);else Dr(o,i,n,s,!1)}function Rr(t,e){if(null!==e){const n=e.type;if(3&n)return Ft(e,t);if(4&n)return Vr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Rr(t,n);{const n=t[e.index];return bt(n)?Vr(-1,n):Pt(n)}}if(32&n)return vr(e,t)()||Pt(t[e.index]);{const n=Pr(t,e);return null!==n?Array.isArray(n)?n[0]:Rr(br(t[16]),n):Rr(t,e.next)}}return null}function Pr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Vr(t,e){const n=mt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Rr(t,r)}return e[7]}function Fr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&pr(Pt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Fr(t,e,n.child,r,i,o,!1),Ir(e,t,i,a,o);else if(32&u){const s=vr(n,r);let u;for(;u=s();)Ir(e,t,i,u,o);Ir(e,t,i,a,o)}else 16&u?Lr(t,e,r,n,i,o):Ir(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Mr(t,e,n,r,i,o){Fr(n,r,t.firstChild,e,i,o,!1)}function Lr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ir(e,t,i,a[u],o);else Fr(t,e,a,s[3],i,o,!0)}function Ur(t,e,n){jt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function qr(t,e,n){jt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Br(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Hr="ng-template";function zr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Br(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Kr(t){return 4===t.type&&t.value!==Hr}function Gr(t,e,n){return e===(4!==t.type||n?t.value:Hr)}function Qr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Se(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Gr(t,u,n)||""===u&&1===e.length){if(Wr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!zr(t.attrs,c,n)){if(Wr(r))return!1;s=!0}continue}const l=Yr(8&r?"class":u,i,Kr(t),n);if(-1===l){if(Wr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Br(e,c,0)||2&r&&c!==t){if(Wr(r))return!1;s=!0}}}}else{if(!s&&!Wr(r)&&!Wr(u))return!1;if(s&&Wr(u))continue;s=!1,r=u|1&r}}return Wr(r)||s}function Wr(t){return 0==(1&t)}function Yr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function $r(t,e,n=!1){for(let r=0;r<e.length;r++)if(Qr(t,e[r],n))return!0;return!1}function Xr(t,e){return t?":not("+e.trim()+")":e}function Zr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Wr(s)||(e+=Xr(o,i),i=""),r=s,o=o||!Wr(r);n++}return""!==i&&(e+=Xr(o,i)),e}const Jr={};function ti(t){ei(Wt(),Qt(),ye()+t,te())}function ei(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&be(e,r,n)}else{const r=t.preOrderHooks;null!==r&&we(e,r,0,n)}ge(n)}function ni(t,e){return t<<17|e<<2}function ri(t){return t>>17&32767}function ii(t){return 2|t}function oi(t){return(131068&t)>>2}function si(t,e){return-131069&t|e<<2}function ai(t){return 1|t}function ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];se(i),n.contentQueries(2,e[o],o)}}}function ci(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ht(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function li(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Xt(),s=Jt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Kt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Kt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Zt(o,!0),o}function hi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function fi(t,e,n){ce(e);try{const r=t.viewQuery;null!==r&&Li(1,r,n);const i=t.template;null!==i&&yi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ui(t,e),t.staticViewQueries&&Li(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ri(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,pe()}}function di(t,e,n,r){const i=e[2];if(256==(256&i))return;ce(e);const o=te();try{Ht(e),Kt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&yi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&be(e,n,null)}else{const n=t.preOrderHooks;null!==n&&we(e,n,0,null),_e(e,0)}if(function(t){for(let e=wr(t);null!==e;e=_r(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&zt(r,1),n[2]|=1024}}}(e),function(t){for(let e=wr(t);null!==e;e=_r(e))for(let t=mt;t<e.length;t++){const n=e[t],r=n[1];qt(n)&&di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ui(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&be(e,n)}else{const n=t.contentHooks;null!==n&&we(e,n,1),_e(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ge(~r);else{const i=r,o=n[++t],s=n[++t];ie(o,i),s(2,e[i])}}}finally{ge(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ni(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Li(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&be(e,n)}else{const n=t.viewHooks;null!==n&&we(e,n,2),_e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,zt(e[3],-1))}finally{pe()}}function pi(t,e,n,r){const i=e[10],o=!te(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&fi(t,e,r),di(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function yi(t,e,n,r,i){const o=ye(),s=2&r;try{ge(-1),s&&e.length>gt&&ei(t,e,gt,te()),n(r,i)}finally{ge(o)}}function gi(t,e,n){Gt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Fe(n,e),pr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=It(r);o&&Ai(e,n,r);const u=We(e,t,a,n);pr(u,e),null!==s&&xi(0,a-i,u,r,0,s),o&&(Lt(n.index,e)[8]=u)}}(t,e,n,Ft(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Kt.lFrame.currentDirectiveIndex;try{ge(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];oe(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ii(r,i)}}finally{ge(-1),oe(s)}}(t,e,n))}function mi(t,e,n=Ft){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function vi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=bi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function bi(t,e,n,r,i,o,s,a,u,c){const l=gt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function _i(t,e,n,r){let i=!1;if(Gt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];$r(n,s.selectors,!1)&&(i||(i=[]),qe(Fe(n,e),t,s.type),It(s)?(Ti(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ci(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=hi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=xe(n.mergedAttrs,c.hostAttrs),Si(t,n,e,u,c),Oi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Kr(e)?null:ki(n,i);o.push(c),s=wi(n,u,s),a=wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new I("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=xe(n.mergedAttrs,n.attrs),i}function Ei(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ii(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ti(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Oi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;It(e)&&(n[""]=t)}}function Ci(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Si(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Tt(i.type)),s=new Oe(o,It(i),null);t.blueprint[r]=s,n[r]=s,Ei(t,e,0,r,hi(t,n,i.hostVars,Jr),i)}function Ai(t,e,n){const r=Ft(e,t),i=vi(n),o=t[10],s=Pi(t,ci(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function xi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ki(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Di(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ni(t,e){const n=Lt(e,t);if(qt(n)){const t=n[1];80&n[2]?di(t,n,t.template,n[8]):n[5]>0&&ji(n)}}function ji(t){for(let n=wr(t);null!==n;n=_r(n))for(let t=mt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];di(t,e,t.template,e[8])}else e[5]>0&&ji(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Lt(e[n],t);qt(r)&&r[5]>0&&ji(r)}}function Ri(t,e){const n=Lt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),fi(r,n,n[8])}function Pi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Vi(t){for(;t;){t[2]|=64;const e=br(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Fi(t,e,n){const r=e[10];r.begin&&r.begin();try{di(t,e,t.template,n)}catch(i){throw Hi(e,i),i}finally{r.end&&r.end()}}function Mi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ut(n),i=r[1];pi(i,r,i.template,n)}}(t[8])}function Li(t,e,n){se(0),e(t,n)}const Ui=(()=>Promise.resolve(null))();function qi(t){return t[7]||(t[7]=[])}function Bi(t){return t.cleanup||(t.cleanup=[])}function Hi(t,e){const n=t[9],r=n?n.get(dr,null):null;r&&r.handleError(e)}function zi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ki(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=v(i,t):2==o&&(r=v(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Gi=new rn("INJECTOR",-1);class Qi{get(t,e=hn){if(e===hn){const e=new Error(`NullInjectorError: No provider for ${m(t)}!`);throw e.name="NullInjectorError",e}return e}}const Wi=new rn("Set Injector scope."),Yi={},$i={},Xi=[];let Zi;function Ji(){return void 0===Zi&&(Zi=new Qi),Zi}function to(t,e=null,n=null,r){return new eo(t,n,e||Ji(),r)}class eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&on(e,n=>this.processProvider(n,t,e)),on([t],t=>this.processInjectorType(t,[],i)),this.records.set(Gi,io(void 0,this));const o=this.records.get(Wi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:m(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=hn,n=V.Default){this.assertNotDestroyed();const r=gn(this);try{if(!(n&V.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof rn)&&x(t);e=n&&this.injectableDefInScope(n)?io(no(t),Yi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&V.Self?Ji():this.parent).get(t,e=n&V.Optional&&e===hn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(m(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[dn]&&i.unshift(e[dn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=m(e);if(Array.isArray(e))i=e.map(m).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):m(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(fn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{gn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(m(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=_(t)))return!1;let r=D(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=D(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{on(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];on(r,t=>this.processProvider(t,n,r||Xi))}}this.injectorDefTypes.add(o);const a=Tt(o)||(()=>new o);this.records.set(o,io(a,Yi));const u=r.providers;if(null!=u&&!s){const e=t;on(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=so(t=_(t))?t:_(t&&t.provide);const i=function(t,e,n){return oo(t)?io(void 0,t.useValue):io(ro(t),Yi)}(t);if(so(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=io(void 0,Yi,!0),e.factory=()=>bn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Yi&&(e.value=$i,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function no(t){const e=x(t),n=null!==e?e.factory:Tt(t);if(null!==n)return n;if(t instanceof rn)throw new Error(`Token ${m(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${m(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[N]||t[R]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ro(t,e,n){let r;if(so(t)){const e=_(t);return Tt(e)||no(e)}if(oo(t))r=()=>_(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...bn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>vn(_(t.useExisting));else{const e=_(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Tt(e)||no(e);r=()=>new e(...bn(t.deps))}var i;return r}function io(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oo(t){return null!==t&&"object"==typeof t&&pn in t}function so(t){return"function"==typeof t}const ao=function(t,e,n){return function(t,e=null,n=null,r){const i=to(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let uo=(()=>{class t{static create(t,e){return Array.isArray(t)?ao(t,e,""):ao(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=hn,t.NULL=new Qi,t.\u0275prov=S({token:t,providedIn:"any",factory:()=>vn(Gi)}),t.__NG_ELEMENT_ID__=-1,t})();function co(t,e){ve(Ut(t)[1],$t())}function lo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(It(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ho(t.inputs),e.declaredInputs=ho(t.declaredInputs),e.outputs=ho(t.outputs);const n=i.hostBindings;n&&yo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&fo(t,o),s&&po(t,s),g(t.inputs,i.inputs),g(t.declaredInputs,i.declaredInputs),g(t.outputs,i.outputs),It(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===lo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xe(i.hostAttrs,n=xe(n,i.hostAttrs))}}(r)}function ho(t){return t===W?{}:t===$?[]:t}function fo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function po(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function yo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let go=null;function mo(){if(!go){const t=Q.Symbol;if(t&&t.iterator)go=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(go=n)}}}return go}function vo(t){return!!bo(t)&&(Array.isArray(t)||!(t instanceof Map)&&mo()in t)}function bo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wo(t,e,n){return t[e]=n}function _o(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Eo(t,e,n,r){const i=Qt();return _o(i,re(),e)&&(Wt(),function(t,e,n,r,i,o){const s=Ft(t,e);!function(t,e,n,r,i,o,s){if(null==o)jt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?T(o):s(o,r||"",i);jt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(me(),i,t,e,n,r)),Eo}function Io(t,e,n,r,i,o,s,a){const u=Qt(),c=Wt(),l=t+gt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=li(e,t,4,s||null,Bt(c,a));_i(e,n,l,Bt(c,u)),ve(e,l);const h=l.tViews=bi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Zt(h,!1);const f=u[11].createComment("");jr(c,u,f,h),pr(f,u),Pi(u,u[l]=Di(f,u,f,h)),Et(h)&&gi(c,u,h),null!=s&&mi(u,h,a)}function To(t,e=V.Default){const n=Qt();return null===n?vn(t,e):ze($t(),n,_(t),e)}function Oo(t,e,n){const r=Qt();return _o(r,re(),e)&&function(t,e,n,r,i,o,s,a){const u=Ft(e,n);let c,l=e.inputs;var h;null!=l&&(c=l[r])?(zi(t,n,c,r,i),_t(e)&&function(t,e){const n=Lt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,jt(o)?o.setProperty(u,r,i):Ae(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}(Wt(),me(),r,t,e,r[11],n),Oo}function Co(t,e,n,r,i){const o=i?"class":"style";zi(t,n,e.inputs[o],o,r)}function So(t,e,n,r){const i=Qt(),o=Wt(),s=gt+t,a=i[11],u=i[s]=Tr(a,e,Kt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=li(e,t,2,i,Bt(a,o));return _i(e,n,u,Bt(a,s)),null!==u.attrs&&Ki(u,u.attrs,!1),null!==u.mergedAttrs&&Ki(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Zt(c,!0);const l=c.mergedAttrs;null!==l&&Ce(a,u,l);const h=c.classes;null!==h&&qr(a,u,h);const f=c.styles;null!==f&&Ur(a,u,f),64!=(64&c.flags)&&jr(o,i,u,c),0===Kt.lFrame.elementDepthCount&&pr(u,i),Kt.lFrame.elementDepthCount++,Et(c)&&(gi(o,i,c),function(t,e,n){if(wt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&mi(i,c)}function Ao(){let t=$t();Jt()?Kt.lFrame.isParent=!1:(t=t.parent,Zt(t,!1));const e=t;Kt.lFrame.elementDepthCount--;const n=Wt();n.firstCreatePass&&(ve(n,t),wt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Co(n,e,Qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Co(n,e,Qt(),e.stylesWithoutHost,!1)}function xo(t,e,n,r){So(t,e,n,r),Ao()}function ko(){return Qt()}function Do(t){return!!t&&"function"==typeof t.then}function No(t){return!!t&&"function"==typeof t.subscribe}const jo=No;function Ro(t,e,n=!1,r){const i=Qt(),o=Wt(),s=$t();return function(t,e,n,r,i,o,s=!1,a){const u=Et(r),c=t.firstCreatePass&&Bi(t),l=qi(e);let h=!0;if(3&r.type){const f=Ft(r,e),d=a?a(f):W,p=d.target||f,y=l.length,g=a?t=>a(Pt(t[r.index])).target:r.index;if(jt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Vo(r,e,0,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,g,y,y+1)}}else o=Vo(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,y,s)}else o=Vo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Ro}function Po(t,e,n,r){try{return!1!==n(r)}catch(i){return Hi(t,i),!1}}function Vo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Lt(t.index,e):e;0==(32&e[2])&&Vi(s);let a=Po(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Po(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Fo(t=1){return function(t){return(Kt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Kt.lFrame.contextLView))[8]}(t)}function Mo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ri(o):oi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Lo(t[a],e)&&(u=!0,t[a+1]=r?ai(n):ii(n)),a=r?ri(n):oi(n)}u&&(t[n+1]=r?ii(o):ai(o))}function Lo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ln(t,e)>=0}function Uo(t,e){return function(t,e,n,r){const i=Qt(),o=Wt(),s=function(t){const e=Kt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ye()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Kt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Bo(n=qo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=qo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==oi(r))return t[ri(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=qo(null,t,e,n[1],r),n=Bo(n,e.attrs,r),function(t,e,n,r){t[ri(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Bo(r,t[o].hostAttrs,true);return Bo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ri(s),u=oi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ln(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ri(t[a+1]);t[r+1]=ni(e,a),0!==e&&(t[e+1]=si(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ni(a,0),0!==a&&(t[a+1]=si(t[a+1],r)),a=r;else t[r+1]=ni(u,0),0===a?a=r:t[u+1]=si(t[u+1],r),u=r;l&&(t[r+1]=ii(t[r+1])),Mo(t,c,r,!0),Mo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&ln(o,e)>=0&&(n[r+1]=ai(n[r+1]))}(e,c,t,r),s=ni(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Jr&&_o(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];zo(1==(1&c)?Ho(u,e,n,i,oi(c),s):void 0)||(zo(o)||function(t){return 2==(2&t)}(c)&&(o=Ho(u,null,n,i,a,s)),function(t,e,n,r,i){const o=jt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Vt(ye(),n),i,o))}(o,o.data[ye()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=m(Nn(t))),t}(e),true,s)}(t,e),Uo}function qo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Bo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Bo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),un(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ho(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Jr&&(l=c?Y:void 0);let h=c?cn(l,r):u===r?l:void 0;if(o&&!zo(h)&&(h=cn(e,r)),zo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ri(f):oi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=cn(t,r))}return a}function zo(t){return void 0!==t}function Ko(t,e=""){const n=Qt(),r=Wt(),i=t+gt,o=r.firstCreatePass?li(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return jt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);jr(r,n,s,o),Zt(o,!1)}function Go(t){return Qo("",t,""),Go}function Qo(t,e,n){const r=Qt(),i=function(t,e,n,r){return _o(t,re(),n)?e+T(n)+r:Jr}(r,t,e,n);return i!==Jr&&function(t,e,n){const r=Vt(e,t);!function(t,e,n){jt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ye(),i),Qo}const Wo=void 0;var Yo=["en",[["a","p"],["AM","PM"],Wo],[["AM","PM"],Wo,Wo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wo,"{1} 'at' {0}",Wo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let $o={};function Xo(t,e,n){"string"!=typeof e&&(n=e,e=t[ns.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),$o[e]=t,n&&($o[e][ns.ExtraData]=n)}function Zo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=es(e);if(n)return n;const r=e.split("-")[0];if(n=es(r),n)return n;if("en"===r)return Yo;throw new Error(`Missing locale data for the locale "${t}".`)}function Jo(t){return Zo(t)[ns.CurrencyCode]||null}function ts(t){return Zo(t)[ns.PluralCase]}function es(t){return t in $o||($o[t]=Q.ng&&Q.ng.common&&Q.ng.common.locales&&Q.ng.common.locales[t]),$o[t]}var ns=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const rs="en-US";let is=rs;function os(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(is=t.toLowerCase().replace(/_/g,"-"))}function ss(t,e,n,r,i){if(t=_(t),Array.isArray(t))for(let o=0;o<t.length;o++)ss(t[o],e,n,r,i);else{const o=Wt(),s=Qt();let a=so(t)?t:_(t.provide),u=ro(t);const c=$t(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(so(t)||!t.multi){const r=new Oe(u,i,To),d=cs(a,e,i?l:l+f,h);-1===d?(qe(Fe(c,s),o,a),as(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=cs(a,e,l+f,h),p=cs(a,e,l,l+f),y=d>=0&&n[d],g=p>=0&&n[p];if(i&&!g||!i&&!y){qe(Fe(c,s),o,a);const l=function(t,e,n,r,i){const o=new Oe(t,n,To);return o.multi=[],o.index=e,o.componentProviders=0,us(o,i,r&&!n),o}(i?hs:ls,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),as(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else as(o,t,d>-1?d:p,us(n[i?p:d],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function as(t,e,n,r){const i=so(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function us(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function cs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ls(t,e,n,r){return fs(this.multi,[])}function hs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=We(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),fs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],fs(i,o);return o}function fs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ds(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Wt();if(r.firstCreatePass){const i=It(t);ss(n,r.data,r.blueprint,i,!0),ss(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ps{}class ys{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${m(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let gs=(()=>{class t{}return t.NULL=new ys,t})();function ms(...t){}function vs(t,e){return new ws(Ft(t,e))}const bs=function(){return vs($t(),Qt())};let ws=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=bs,t})();class _s{}let Es=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Is(),t})();const Is=function(){const t=Qt(),e=Lt($t().index,t);return function(t){return t[11]}(vt(e)?e:t)};let Ts=(()=>{class t{}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>null}),t})();class Os{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Cs=new Os("11.2.14");class Ss{constructor(){}supports(t){return vo(t)}create(t){return new xs(t)}}const As=(t,e)=>e;class xs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||As}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<js(n,r,i)?e:n,s=js(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!vo(t))throw new Error(`Error trying to diff '${m(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[mo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ks(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ns),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ns),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ks{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ds{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ns{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ds,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function js(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Rs{constructor(){}supports(t){return t instanceof Map||bo(t)}create(){return new Ps}}class Ps{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bo(t)))throw new Error(`Error trying to diff '${m(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Vs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Vs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fs(){return new Ms([new Ss])}let Ms=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Fs()),deps:[[t,new In,new En]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=S({token:t,providedIn:"root",factory:Fs}),t})();function Ls(){return new Us([new Rs])}let Us=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ls()),deps:[[t,new In,new En]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=S({token:t,providedIn:"root",factory:Ls}),t})();function qs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Pt(o)),bt(o))for(let t=mt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&qs(e[1],e,n,r)}const s=n.type;if(8&s)qs(t,e,n.child,r);else if(32&s){const t=vr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Pr(e,n);if(Array.isArray(t))r.push(...t);else{const n=br(e[16]);qs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Bs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return qs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(bt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Cr(t,n),an(e,n))}this._attachedToViewContainer=!1}Sr(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=qi(e);i.push(r)}(0,this._lView,0,t)}markForCheck(){Vi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ee(!0);try{Fi(t,e,n)}finally{ee(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Mr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Hs extends Bs{constructor(t){super(t),this._view=t}detectChanges(){Mi(this._view)}checkNoChanges(){!function(t){ee(!0);try{Mi(t)}finally{ee(!1)}}(this._view)}get context(){return null}}const zs=[new Rs],Ks=new Ms([new Ss]),Gs=new Us(zs),Qs=function(){return t=$t(),e=Qt(),4&t.type?new $s(e,t,vs(t,e)):null;var t,e};let Ws=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qs,t})();const Ys=Ws,$s=class extends Ys{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),fi(e,n,t),new Bs(n)}};class Xs{}const Zs=function(){return function(t,e){let n;const r=e[t.index];if(bt(r))n=r;else{let i;if(8&t.type)i=Pt(r);else{const n=e[11];i=n.createComment("");const r=Ft(t,e);xr(n,Nr(n,r),i,function(t,e){return jt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Di(r,e,i,t),Pi(e,n)}return new ea(n,t,e)}($t(),Qt())};let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zs,t})();const ta=Js,ea=class extends ta{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return vs(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ue(this._hostTNode,this._hostLView);if(De(t)){const e=je(t,this._hostLView),n=Ne(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=na(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-mt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Xs,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(bt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ea(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=mt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-mt?(e[4]=n[i],sn(n,mt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Vr(i,o),a=n[11],u=Nr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Mr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),sn(ra(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=na(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);n&&(an(ra(this._lContainer),e),Sr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);return n&&null!=an(ra(this._lContainer),e)?new Bs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function na(t){return t[8]}function ra(t){return t[8]||(t[8]=[])}const ia={};class oa extends gs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=pt(t);return new ua(e,this.ngModule)}}function sa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const aa=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yr});class ua extends ps{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Zr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return sa(this.componentDef.inputs)}get outputs(){return sa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ia,i);return o!==ia||r===ia?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(_s,Rt),s=i.get(Ts,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(jt(t))return t.selectRootElement(e,n===B.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Tr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:yr,clean:Ui,playerHandler:null,flags:0},f=bi(0,null,null,1,0,null,null,null,null,null),d=ci(null,f,h,l,null,null,o,a,s,i);let p,y;ce(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=li(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ki(a,u,!0),null!==t&&(Ce(i,t,u),null!==a.classes&&qr(i,t,a.classes),null!==a.styles&&Ur(i,t,a.styles)));const c=r.createRenderer(t,e),l=ci(n,vi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(qe(Fe(a,n),s,e.type),Ti(s,a),Ci(a,n.length,1)),Pi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Ce(a,c,["ng-version",Cs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Wr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ce(a,c,t),e&&e.length>0&&qr(a,c,e.join(" "))}if(y=Mt(f,gt),void 0!==e){const t=y.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=$t();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Si(t,r,e,hi(t,e,1,null),n));const i=We(e,t,r.directiveStart,r);pr(i,e);const o=Ft(r,e);return o&&pr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=$t();e.contentQueries(1,s,t.directiveStart)}const a=$t();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ge(a.index),Ei(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ii(e,s)),s}(t,this.componentDef,d,h,[co]),fi(f,d,null)}finally{pe()}return new ca(this.componentType,p,vs(y,d),d,y)}}class ca extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Hs(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const la=new Map;class ha extends Xs{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new oa(this);const n=yt(t),r=t[et]||null;r&&os(r),this._bootstrapComponents=gr(n.bootstrap),this._r3Injector=to(t,e,[{provide:Xs,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],m(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=uo.THROW_IF_NOT_FOUND,n=V.Default){return t===uo||t===Xs||t===Gi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class fa extends class{}{constructor(t){super(),this.moduleType=t,null!==yt(t)&&function(t){const e=new Set;!function t(n){const r=yt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${m(e)} vs ${m(e.name)}`)}(i,la.get(i),n),la.set(i,n));const o=gr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ha(this.moduleType,t)}}function da(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return _o(t,s,i)?wo(t,s+1,o?r.call(o,i):r(i)):ya(t,s+1)}(Qt(),ne(),t,e,n,r)}function pa(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=_o(t,e,n);return _o(t,e+1,r)||i}(t,a,i,o)?wo(t,a+2,s?r.call(s,i,o):r(i,o)):ya(t,a+2)}(Qt(),ne(),t,e,n,r,i)}function ya(t,e){const n=t[e];return n===Jr?void 0:n}function ga(t){return e=>{setTimeout(t,void 0,e)}}const ma=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=ga(u),a&&(a=ga(a)),c&&(c=ga(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function va(t=V.Default){const e=function(t=!1){return function(t,e,n){if(!n&&_t(t)){const n=Lt(t.index,e);return new Bs(n,n)}return 47&t.type?new Bs(e[16],e):null}($t(),Qt(),t)}(!0);if(null!=e||t&V.Optional)return e;C("ChangeDetectorRef")}const ba=new rn("Application Initializer");let wa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ms,this.reject=ms,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Do(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(vn(ba,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const _a=new rn("AppId"),Ea={provide:_a,useFactory:function(){return`${Ia()}${Ia()}${Ia()}`},deps:[]};function Ia(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ta=new rn("Platform Initializer"),Oa=new rn("Platform ID"),Ca=new rn("appBootstrapListener");let Sa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Aa=new rn("LocaleId"),xa=new rn("DefaultCurrencyCode");class ka{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Da=function(t){return new fa(t)},Na=Da,ja=function(t){return Promise.resolve(Da(t))},Ra=function(t){const e=Da(t),n=gr(yt(t).declarations).reduce((t,e)=>{const n=pt(e);return n&&t.push(new ua(n)),t},[]);return new ka(e,n)},Pa=Ra,Va=function(t){return Promise.resolve(Ra(t))};let Fa=(()=>{class t{constructor(){this.compileModuleSync=Na,this.compileModuleAsync=ja,this.compileModuleAndAllComponentsSync=Pa,this.compileModuleAndAllComponentsAsync=Va}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Ma=(()=>Promise.resolve(0))();function La(t){"undefined"==typeof Zone?Ma.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ua{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ma(!1),this.onMicrotaskEmpty=new ma(!1),this.onStable=new ma(!1),this.onError=new ma(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=Q.requestAnimationFrame,e=Q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ha(t),Ba(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ha(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return za(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ka(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return za(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ka(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ha(t),Ba(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ua.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ua.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,qa,ms,ms);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const qa={};function Ba(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ha(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function za(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ka(t){t._nesting--,Ba(t)}class Ga{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ma,this.onMicrotaskEmpty=new ma,this.onStable=new ma,this.onError=new ma}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Qa=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ua.assertNotInAngularZone(),La(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())La(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(vn(Ua))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})(),Wa=(()=>{class t{constructor(){this._applications=new Map,Za.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Za.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();class Ya{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function $a(t){Za=t}let Xa,Za=new Ya,Ja=!0,tu=!1;function eu(){return tu=!0,Ja}function nu(){if(tu)throw new Error("Cannot enable prod mode after platform setup.");Ja=!1}const ru=new rn("AllowMultipleToken");class iu{constructor(t,e){this.name=t,this.token=e}}function ou(t,e,n=[]){const r=`Platform: ${e}`,i=new rn(r);return(e=[])=>{let o=su();if(!o||o.injector.get(ru,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Wi,useValue:"platform"});!function(t){if(Xa&&!Xa.destroyed&&!Xa.injector.get(ru,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Xa=t.get(au);const e=t.get(Ta,null);e&&e.forEach(t=>t())}(uo.create({providers:t,name:r}))}return function(t){const e=su();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function su(){return Xa&&!Xa.destroyed?Xa:null}let au=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ga:("zone.js"===t?void 0:t)||new Ua({enableLongStackTrace:eu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Ua,useValue:n}];return n.run(()=>{const e=uo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(dr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{lu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Do(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(wa);return t.runInitializers(),t.donePromise.then(()=>(os(i.injector.get(Aa,rs)||rs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=uu({},e);return function(t,e,n){const r=new fa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(cu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${m(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(vn(uo))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function uu(t,e){return Array.isArray(e)?e.reduce(uu,t):Object.assign(Object.assign({},t),e)}let cu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ua.assertNotInAngularZone(),La(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ua.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(a,c.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ps?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Xs),i=n.create(uo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Qa,null),a=s&&i.injector.get(Wa);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),lu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;lu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ca,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(vn(Ua),vn(uo),vn(dr),vn(gs),vn(wa))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function lu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const hu=function(t){return null},fu=ou(null,"core",[{provide:Oa,useValue:"unknown"},{provide:au,deps:[uo]},{provide:Wa,deps:[]},{provide:Sa,deps:[]}]),du=[{provide:cu,useClass:cu,deps:[Ua,uo,dr,gs,wa]},{provide:aa,deps:[Ua],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:wa,useClass:wa,deps:[[new En,ba]]},{provide:Fa,useClass:Fa,deps:[]},Ea,{provide:Ms,useFactory:function(){return Ks},deps:[]},{provide:Us,useFactory:function(){return Gs},deps:[]},{provide:Aa,useFactory:function(t){return os(t=t||"undefined"!=typeof $localize&&$localize.locale||rs),t},deps:[[new _n(Aa),new En,new In]]},{provide:xa,useValue:"USD"}];let pu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(vn(cu))},t.\u0275mod=ct({type:t}),t.\u0275inj=A({providers:du}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.a)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return I}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return C}),n.d(e,"i",function(){return c}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return d}),n.d(e,"l",function(){return y}),n.d(e,"m",function(){return g}),n.d(e,"n",function(){return l}),n.d(e,"o",function(){return h}),n.d(e,"p",function(){return p}),n.d(e,"q",function(){return m});var r=n("mrSG"),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return c().indexOf("Electron/")>=0}function g(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,b.prototype.create),o}return Object(r.c)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new v(i,a,r);return u},t}();function w(t,e){return t.replace(_,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var _=/\{\$([^}]+)}/g;function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function I(t,e){var n=new T(t,e);return n.subscribe.bind(n)}var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function O(){}function C(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return C}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return T}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return g}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const y=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(y.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.l("angularfire2.app.options"),b=new u.l("angularfire2.app.nameOrConfig"),w=new u.E("6.1.5");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&I("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{I("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},I=(t,...e)=>{Object(u.K)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&I("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const O={provide:class{},useFactory:_,deps:[v,u.s,[new u.t,b]]};let C=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.D.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Fb(u.u))},t.\u0275mod=u.xb({type:t}),t.\u0275inj=u.wb({providers:[O]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class y extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new y(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(y.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function g(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new y(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),y=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.f)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.g)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(y);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.g)(e,t)},createSubscribe:s.e,ErrorFactory:s.b,deepExtend:s.g}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.j)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.o)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.l("DocumentToken");var a=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const u=r.cb;class c{}let l=(()=>{class t extends c{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(u(e||this.locale)(t)){case a.Zero:return"zero";case a.One:return"one";case a.Two:return"two";case a.Few:return"few";case a.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(r.p))},t.\u0275prov=r.vb({token:t,factory:t.\u0275fac}),t})(),h=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.fb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.lb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.zb(r.n),r.zb(r.o),r.zb(r.h),r.zb(r.w))},t.\u0275dir=r.ub({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class f{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let d=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(wd){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new f(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new p(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new p(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.zb(r.F),r.zb(r.B),r.zb(r.n))},t.\u0275dir=r.ub({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class p{constructor(t,e){this.record=t,this.view=e}}let y=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new g,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){m("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){m("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.zb(r.F),r.zb(r.B))},t.\u0275dir=r.ub({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class g{constructor(){this.$implicit=null,this.ngIf=null}}function m(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.lb)(e)}'.`)}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.xb({type:t}),t.\u0275inj=r.wb({providers:[{provide:c,useClass:l}]}),t})();function b(t){return"server"===t}class w extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new w,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=E||(E=document.querySelector("base"),E)?E.getAttribute("href"):null;return null==e?null:(n=e,_||(_=document.createElement("a")),_.setAttribute("href",n),"/"===_.pathname.charAt(0)?_.pathname:"/"+_.pathname);var n}resetBaseElement(){E=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let _,E=null;const I=new r.l("TRANSITION_ID"),T=[{provide:r.b,useFactory:function(t,e,n){return()=>{n.get(r.c).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[I,s,r.m],multi:!0}];class O{static init(){Object(r.M)(new O)}addToWindow(t){r.eb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.eb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.eb.getAllAngularRootElements=()=>t.getAllRootElements(),r.eb.frameworkStabilizers||(r.eb.frameworkStabilizers=[]),r.eb.frameworkStabilizers.push(t=>{const e=r.eb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const C=new r.l("EventManagerPlugins");let S=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(C),r.Fb(r.s))},t.\u0275prov=r.vb({token:t,factory:t.\u0275fac}),t})();class A{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let x=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.vb({token:t,factory:t.\u0275fac}),t})(),k=(()=>{class t extends x{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(D),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(D))}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(s))},t.\u0275prov=r.vb({token:t,factory:t.\u0275fac}),t})();function D(t){o().remove(t)}const N={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},j=/%COMP%/g;function R(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?R(t,i,n):(i=i.replace(j,t),n.push(i))}return n}function P(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let V=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new F(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.G.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new M(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.G.ShadowDom:return new L(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=R(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(S),r.Fb(k),r.Fb(r.a))},t.\u0275prov=r.vb({token:t,factory:t.\u0275fac}),t})();class F{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(N[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=N[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=N[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.y.DashCase|r.y.Important)?t.style.setProperty(e,n,i&r.y.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.y.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,P(n)):this.eventManager.addEventListener(t,e,P(n))}}class M extends F{constructor(t,e,n,r){super(t),this.component=n;const i=R(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(j,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(j,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class L extends F{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=R(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let U=(()=>{class t extends A{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(s))},t.\u0275prov=r.vb({token:t,factory:t.\u0275fac}),t})();const q=["alt","control","meta","shift"],B={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},z={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let K=(()=>{class t extends A{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(q.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&H.hasOwnProperty(e)&&(e=H[e]))}return B[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),q.forEach(r=>{r!=n&&(0,z[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(s))},t.\u0275prov=r.vb({token:t,factory:t.\u0275fac}),t})();const G=[{provide:r.u,useValue:"browser"},{provide:r.v,useValue:function(){w.makeCurrent(),O.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.kb)(document),document},deps:[]}],Q=Object(r.H)(r.L,"browser",G),W=[[],{provide:r.O,useValue:"root"},{provide:r.i,useFactory:function(){return new r.i},deps:[]},{provide:C,useClass:U,multi:!0,deps:[s,r.s,r.u]},{provide:C,useClass:K,multi:!0,deps:[s]},[],{provide:V,useClass:V,deps:[S,k,r.a]},{provide:r.x,useExisting:V},{provide:x,useExisting:k},{provide:k,useClass:k,deps:[s]},{provide:r.C,useClass:r.C,deps:[r.s]},{provide:S,useClass:S,deps:[C,r.s]},[]];let Y=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.a,useValue:e.appId},{provide:I,useExisting:r.a},T]}}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(t,12))},t.\u0275mod=r.xb({type:t}),t.\u0275inj=r.wb({providers:W,imports:[v,r.d]}),t})();"undefined"!=typeof window&&window;var $=n("lJxs"),X=n("Jgta"),Z=n("D0XW"),J=n("HDdC"),tt=n("Cfvw"),et=n("LRne"),nt=n("bHdf");function rt(...t){return Object(nt.a)(1)(Object(et.a)(...t))}var it=n("z+Ro");function ot(...t){const e=t[t.length-1];return Object(it.a)(e)?(t.pop(),n=>rt(t,n,e)):e=>rt(t,e)}var st=n("7o/Q");function at(){return t=>t.lift(new ut)}class ut{call(t,e){return e.subscribe(new ct(t))}}class ct extends st.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function lt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ht(t,e,n))}}class ht{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ft(t,this.accumulator,this.seed,this.hasSeed))}}class ft extends st.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class dt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new pt(t,this.compare,this.keySelector))}}class pt extends st.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function yt(t,e){return function(n){return n.lift(new gt(t,e))}}class gt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new mt(t,this.predicate,this.thisArg))}}class mt extends st.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var vt=n("pxpQ"),bt=n("spgP"),wt=n("zIRd"),_t=n("qOnz"),Et=n("q/0M"),It=function(t,e){return(It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Tt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ot,Ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},St=St||{},At=Ct||self;function xt(){}function kt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Dt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Nt="closure_uid_"+(1e9*Math.random()>>>0),jt=0;function Rt(t,e,n){return t.call.apply(t.bind,arguments)}function Pt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Vt(t,e,n){return(Vt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Rt:Pt).apply(null,arguments)}function Ft(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Mt(){return Date.now()}function Lt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Ut(){this.j=this.j,this.i=this.i}Ut.prototype.j=!1,Ut.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Nt)&&t[Nt]||(t[Nt]=++jt)}(this)},Ut.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var qt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Bt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ht(t){return Array.prototype.concat.apply([],arguments)}function zt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Kt(t){return/^[\s\xa0]*$/.test(t)}var Gt,Qt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Wt(t,e){return-1!=t.indexOf(e)}function Yt(t,e){return t<e?-1:t>e?1:0}t:{var $t=At.navigator;if($t){var Xt=$t.userAgent;if(Xt){Gt=Xt;break t}}Gt=""}function Zt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Jt(t){var e={};for(var n in t)e[n]=t[n];return e}var te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<te.length;o++)n=te[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ne(t){return ne[" "](t),t}ne[" "]=xt;var re,ie,oe=Wt(Gt,"Opera"),se=Wt(Gt,"Trident")||Wt(Gt,"MSIE"),ae=Wt(Gt,"Edge"),ue=ae||se,ce=Wt(Gt,"Gecko")&&!(Wt(Gt.toLowerCase(),"webkit")&&!Wt(Gt,"Edge"))&&!(Wt(Gt,"Trident")||Wt(Gt,"MSIE"))&&!Wt(Gt,"Edge"),le=Wt(Gt.toLowerCase(),"webkit")&&!Wt(Gt,"Edge");function he(){var t=At.document;return t?t.documentMode:void 0}t:{var fe="",de=(ie=Gt,ce?/rv:([^\);]+)(\)|;)/.exec(ie):ae?/Edge\/([\d\.]+)/.exec(ie):se?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ie):le?/WebKit\/(\S+)/.exec(ie):oe?/(?:Version)[ \/]?(\S+)/.exec(ie):void 0);if(de&&(fe=de?de[1]:""),se){var pe=he();if(null!=pe&&pe>parseFloat(fe)){re=String(pe);break t}}re=fe}var ye={};function ge(t){return function(t,e){var n=ye;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Qt(String(re)).split("."),r=Qt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Yt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Yt(0==s[2].length,0==a[2].length)||Yt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var me=At.document&&se&&(he()||parseInt(re,10))||void 0,ve=!se||9<=Number(me),be=se&&!ge("9"),we=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{At.addEventListener("test",xt,e),At.removeEventListener("test",xt,e)}catch(n){}return t}();function _e(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ee(t,e){if(_e.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ce){t:{try{ne(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ie[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}_e.prototype.b=function(){this.defaultPrevented=!0},Lt(Ee,_e);var Ie={2:"touch",3:"pen",4:"mouse"};Ee.prototype.b=function(){Ee.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,be)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Te="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Ce(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Oe,this.Y=this.Z=!1}function Se(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ae(t){this.src=t,this.a={},this.b=0}function xe(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Se(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ke(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ae.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ke(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ce(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var De="closure_lm_"+(1e6*Math.random()|0),Ne={};function je(t,e,n,r,i){if(r&&r.once)return Pe(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)je(t,e[o],n,r,i);return null}return n=He(n),t&&t[Te]?t.va(e,n,Dt(r)?!!r.capture:!!r,i):Re(t,e,n,!1,r,i)}function Re(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Dt(i)?!!i.capture:!!i;if(s&&!ve)return null;var a=qe(t);if(a||(t[De]=a=new Ae(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ue,e=ve?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)we||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Me(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Pe(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pe(t,e[o],n,r,i);return null}return n=He(n),t&&t[Te]?t.wa(e,n,Dt(r)?!!r.capture:!!r,i):Re(t,e,n,!0,r,i)}function Ve(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ve(t,e[o],n,r,i);else r=Dt(r)?!!r.capture:!!r,n=He(n),t&&t[Te]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ke(o=t.a[e],n,r,i))&&(Se(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=qe(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ke(e,n,r,i)),(n=-1<t?e[t]:null)&&Fe(n))}function Fe(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Te])xe(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Me(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=qe(e))?(xe(n,t),0==n.b&&(n.src=null,e[De]=null)):Se(t)}}}function Me(t){return t in Ne?Ne[t]:Ne[t]="on"+t}function Le(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Fe(t),n.call(r,e)}function Ue(t,e){if(t.Y)return!0;if(!ve){if(!e)t:{e=["window","event"];for(var n=At,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Le(t,e=new Ee(e,this))}return Le(t,new Ee(e,this))}function qe(t){return(t=t[De])instanceof Ae?t:null}var Be="__closure_events_fn_"+(1e9*Math.random()>>>0);function He(t){return"function"==typeof t?t:(t[Be]||(t[Be]=function(e){return t.handleEvent(e)}),t[Be])}function ze(){Ut.call(this),this.c=new Ae(this),this.J=this,this.C=null}function Ke(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new _e(e,t);else if(e instanceof _e)e.target=e.target||t;else{var i=e;ee(e=new _e(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ge(s,r,!0,e)&&i}if(i=Ge(s=e.a=t,r,!0,e)&&i,i=Ge(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ge(s=e.a=n[o],r,!1,e)&&i}function Ge(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&xe(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Lt(ze,Ut),ze.prototype[Te]=!0,(Ot=ze.prototype).addEventListener=function(t,e,n,r){je(this,t,e,n,r)},Ot.removeEventListener=function(t,e,n,r){Ve(this,t,e,n,r)},Ot.G=function(){if(ze.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Se(n[r]);delete e.a[t],e.b--}}this.C=null},Ot.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ot.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Qe=At.JSON.stringify;function We(){this.b=this.a=null}var Ye,$e=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ze},function(t){t.reset()});function Xe(){var t=nn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ze(){this.next=this.b=this.a=null}function Je(t){At.setTimeout(function(){throw t},0)}function tn(t,e){Ye||function(){var t=At.Promise.resolve(void 0);Ye=function(){t.then(rn)}}(),en||(Ye(),en=!0),nn.add(t,e)}We.prototype.add=function(t,e){var n=$e.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ze.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ze.prototype.reset=function(){this.next=this.b=this.a=null};var en=!1,nn=new We;function rn(){for(var t;t=Xe();){try{t.a.call(t.b)}catch(n){Je(n)}var e=$e;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}en=!1}function on(t,e){ze.call(this),this.b=t||1,this.a=e||At,this.f=Vt(this.Za,this),this.g=Mt()}function sn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function an(t,e,n){if("function"==typeof t)n&&(t=Vt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Vt(t.handleEvent,t)}return 2147483647<Number(e)?-1:At.setTimeout(t,e||0)}function un(t){t.a=an(function(){t.a=null,t.c&&(t.c=!1,un(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Lt(on,ze),(Ot=on.prototype).aa=!1,Ot.M=null,Ot.Za=function(){if(this.aa){var t=Mt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ke(this,"tick"),this.aa&&(sn(this),this.start()))}},Ot.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Mt())},Ot.G=function(){on.X.G.call(this),sn(this),delete this.a};var cn=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}It(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:un(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(At.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Ut);function ln(t){Ut.call(this),this.b=t,this.a={}}Lt(ln,Ut);var hn=[];function fn(t,e,n,r){Array.isArray(n)||(n&&(hn[0]=n.toString()),n=hn);for(var i=0;i<n.length;i++){var o=je(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function dn(t){Zt(t.a,function(t,e){this.a.hasOwnProperty(e)&&Fe(t)},t),t.a={}}function pn(){this.a=!0}function yn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Qe(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ln.prototype.G=function(){ln.X.G.call(this),dn(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pn.prototype.info=function(){};var gn={},mn=null;function vn(){return mn=mn||new ze}function bn(t){_e.call(this,gn.Fa,t)}function wn(t){var e=vn();Ke(e,new bn(e,t))}function _n(t,e){_e.call(this,gn.STAT_EVENT,t),this.stat=e}function En(t){var e=vn();Ke(e,new _n(e,t))}function In(t){_e.call(this,gn.Ga,t)}function Tn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){t()},e)}gn.Fa="serverreachability",Lt(bn,_e),gn.STAT_EVENT="statevent",Lt(_n,_e),gn.Ga="timingevent",Lt(In,_e);var On={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Cn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Sn(){}function An(){}Sn.prototype.a=null;var xn,kn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Dn(){_e.call(this,"d")}function Nn(){_e.call(this,"c")}function jn(){}function Rn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ln(this),this.P=Pn,this.R=new on(t=ue?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Lt(Dn,_e),Lt(Nn,_e),Lt(jn,Sn),xn=new jn;var Pn=45e3,Vn={},Fn={};function Mn(t,e,n){t.H=1,t.i=sr(tr(e)),t.j=n,t.I=!0,Ln(t,null)}function Ln(t,e){t.u=Mt(),Bn(t),t.l=tr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),br(n.b,"t",r),t.D=0,t.a=di(t.g,t.g.C?e:null),0<t.O&&(t.F=new cn(Vt(t.Ca,t,t.a),t.O)),fn(t.J,t.a,"readystatechange",t.Xa),e=t.B?Jt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),wn(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Un(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=qn(t,n);if(i==Fn){4==e&&(t.h=4,En(14),r=!1),yn(t.c,t.f,null,"[Incomplete Response]");break}if(i==Vn){t.h=4,En(15),yn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}yn(t.c,t.f,i,null),Qn(t,i)}4==e&&0==n.length&&(t.h=1,En(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),oi(e),e.F=!0,En(11))):(yn(t.c,t.f,n,"[Invalid Chunked Response]"),Gn(t),Kn(t))}function qn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Fn:(n=Number(e.substring(n,r)),isNaN(n)?Vn:(r+=1)+n>e.length?Fn:(e=e.substr(r,n),t.D=r+n,e))}function Bn(t){t.T=Mt()+t.P,Hn(t,t.P)}function Hn(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Tn(Vt(t.Va,t),e)}function zn(t){t.o&&(At.clearTimeout(t.o),t.o=null)}function Kn(t){0==t.g.v||t.A||ui(t.g,t)}function Gn(t){zn(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,sn(t.R),dn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Qn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Cr(n.b,t)))if(n.I=t.N,!t.C&&Cr(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch($d){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ai(n),$r(n)}ii(n),En(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Tn(Vt(n.Sa,n),6e3));if(1>=Or(n.b)&&n.ea){try{n.ea()}catch($d){}n.ea=void 0}}else li(n,11)}else if((t.C||n.a==t)&&ai(n),!Kt(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Wt(l,"spdy")||Wt(l,"quic")||Wt(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Sr(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,or(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Mt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=fi(u,u.C?u.ga:null,u.fa),d.C){Ar(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&(zn(p),Bn(p)),u.a=d}else ri(u);0<n.g.length&&Jr(n)}else"stop"!=i[0]&&"close"!=i[0]||li(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?li(n,7):Yr(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);wn(4)}catch($d){}}function Wn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(kt(t)||"string"==typeof t)Bt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(kt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(kt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Yn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Yn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function $n(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ot=Rn.prototype).setTimeout=function(t){this.P=t},Ot.Xa=function(t){t=t.target;var e=this.F;e&&3==Kr(t)?e.f():this.Ca(t)},Ot.Ca=function(t){try{if(t==this.a)t:{var e=Kr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ue&&!this.a.$())){this.A||4!=e||7==n||wn(8==n||0>=r?3:2),zn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kt(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,En(12),Gn(this),Kn(this);break t}yn(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Qn(this,u)}this.I?(Un(this,e,o),ue&&this.b&&3==e&&(fn(this.J,this.R,"tick",this.Wa),this.R.start())):(yn(this.c,this.f,o,null),Qn(this,o)),4==e&&Gn(this),this.b&&!this.A&&(4==e?ui(this.g,this):(this.b=!1,Bn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,En(12)):(this.h=0,En(13)),Gn(this),Kn(this)}}}catch(c){}},Ot.Wa=function(){if(this.a){var t=Kr(this.a),e=this.a.$();this.D<e.length&&(zn(this),Un(this,t,e),this.b&&4!=t&&Bn(this))}},Ot.cancel=function(){this.A=!0,Gn(this)},Ot.Va=function(){this.o=null;var t=Mt();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(wn(3),En(17)),Gn(this),this.h=2,Kn(this)):Hn(this,this.T-t)},(Ot=Yn.prototype).K=function(){$n(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ot.L=function(){return $n(this),this.a.concat()},Ot.get=function(t,e){return Xn(this.b,t)?this.b[t]:e},Ot.set=function(t,e){Xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ot.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Zn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Jn){this.a=void 0!==e?e:t.a,er(this,t.f),this.j=t.j,nr(this,t.c),rr(this,t.h),this.g=t.g,e=t.b;var n=new yr;n.c=e.c,e.a&&(n.a=new Yn(e.a),n.b=e.b),ir(this,n),this.i=t.i}else t&&(n=String(t).match(Zn))?(this.a=!!e,er(this,n[1]||"",!0),this.j=ar(n[2]||""),nr(this,n[3]||"",!0),rr(this,n[4]),this.g=ar(n[5]||"",!0),ir(this,n[6]||"",!0),this.i=ar(n[7]||"")):(this.a=!!e,this.b=new yr(null,this.a))}function tr(t){return new Jn(t)}function er(t,e,n){t.f=n?ar(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function nr(t,e,n){t.c=n?ar(e,!0):e}function rr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ir(t,e,n){e instanceof yr?(t.b=e,function(t,e){e&&!t.f&&(gr(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(mr(this,e),br(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ur(e,dr)),t.b=new yr(e,t.a))}function or(t,e,n){t.b.set(e,n)}function sr(t){return or(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Mt()).toString(36)),t}function ar(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ur(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,cr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Jn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ur(e,lr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ur(e,lr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ur(n,"/"==n.charAt(0)?fr:hr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ur(n,pr)),t.join("")};var lr=/[#\/\?@]/g,hr=/[#\?:]/g,fr=/[#\?]/g,dr=/[#\?@]/g,pr=/#/g;function yr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function gr(t){t.a||(t.a=new Yn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function mr(t,e){gr(t),e=wr(t,e),Xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&$n(t)))}function vr(t,e){return gr(t),e=wr(t,e),Xn(t.a.b,e)}function br(t,e,n){mr(t,e),0<n.length&&(t.c=null,t.a.set(wr(t,e),zt(n)),t.b+=n.length)}function wr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ot=yr.prototype).add=function(t,e){gr(this),this.c=null,t=wr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ot.forEach=function(t,e){gr(this),this.a.forEach(function(n,r){Bt(n,function(n){t.call(e,n,r,this)},this)},this)},Ot.L=function(){gr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ot.K=function(t){gr(this);var e=[];if("string"==typeof t)vr(this,t)&&(e=Ht(e,this.a.get(wr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ht(e,t[n])}return e},Ot.set=function(t,e){return gr(this),this.c=null,vr(this,t=wr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ot.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ot.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var _r=function(){return function(t,e){this.b=t,this.a=e}}();function Er(t){this.g=t||Ir,t=At.PerformanceNavigationTiming?0<(t=At.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(At.ia&&At.ia.ya&&At.ia.ya()&&At.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ir=10;function Tr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Or(t){return t.b?1:t.a?t.a.size:0}function Cr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Sr(t,e){t.a?t.a.add(e):t.b=e}function Ar(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function xr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Tt(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return zt(t.c)}function kr(){}function Dr(){this.a=new kr}function Nr(t,e,n){var r=n||"";try{Wn(t,function(t,n){var i=t;Dt(t)&&(i=Qe(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(jp){throw e.push(r+"type="+encodeURIComponent("_badmap")),jp}}function jr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Er.prototype.cancel=function(){var t,e;if(this.c=xr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Tt(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},kr.prototype.stringify=function(t){return At.JSON.stringify(t,void 0)},kr.prototype.parse=function(t){return At.JSON.parse(t,void 0)};var Rr=At.JSON.parse;function Pr(t){ze.call(this),this.headers=new Yn,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Vr,this.D=this.F=!1}Lt(Pr,ze);var Vr="",Fr=/^https?$/i,Mr=["POST","PUT"];function Lr(t){return"content-type"==t.toLowerCase()}function Ur(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,qr(t),Hr(t)}function qr(t){t.u||(t.u=!0,Ke(t,"complete"),Ke(t,"error"))}function Br(t){if(t.b&&void 0!==St&&(!t.s[1]||4!=Kr(t)||2!=t.W()))if(t.l&&4==Kr(t))an(t.za,0,t);else if(Ke(t,"readystatechange"),4==Kr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Zn)[1]||null;if(!o&&At.self&&At.self.location){var s=At.self.location.protocol;o=s.substr(0,s.length-1)}i=!Fr.test(o?o.toLowerCase():"")}e=i}if(e)Ke(t,"complete"),Ke(t,"success");else{t.h=6;try{var a=2<Kr(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",qr(t)}}finally{Hr(t)}}}function Hr(t,e){if(t.a){zr(t);var n=t.a,r=t.s[0]?xt:null;t.a=null,t.s=null,e||Ke(t,"ready");try{n.onreadystatechange=r}catch(jp){}}}function zr(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(At.clearTimeout(t.m),t.m=null)}function Kr(t){return t.a?t.a.readyState:0}function Gr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Zt(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):or(t,e,n))}function Qr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wr(t){this.pa=0,this.g=[],this.c=new pn,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Qr("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Qr("baseRetryDelayMs",5e3,t),this.Ra=Qr("retryDelaySeedMs",1e4,t),this.Ma=Qr("forwardChannelMaxRetries",2,t),this.ma=Qr("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Er(t&&t.concurrentRequestLimit),this.ka=new Dr,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Yr(t){if(Xr(t),3==t.v){var e=t.R++,n=tr(t.B);or(n,"SID",t.J),or(n,"RID",e),or(n,"TYPE","terminate"),ei(t,n),(e=new Rn(t,t.c,e,void 0)).H=2,e.i=sr(tr(n)),n=!1,At.navigator&&At.navigator.sendBeacon&&(n=At.navigator.sendBeacon(e.i.toString(),"")),!n&&At.Image&&((new Image).src=e.i,n=!0),n||(e.a=di(e.g,null),e.a.ba(e.i)),e.u=Mt(),Bn(e)}hi(t)}function $r(t){t.a&&(oi(t),t.a.cancel(),t.a=null)}function Xr(t){$r(t),t.j&&(At.clearTimeout(t.j),t.j=null),ai(t),t.b.cancel(),t.h&&("number"==typeof t.h&&At.clearTimeout(t.h),t.h=null)}function Zr(t,e){t.g.push(new _r(t.Oa++,e)),3==t.v&&Jr(t)}function Jr(t){Tr(t.b)||t.h||(t.h=!0,tn(t.Ba,t),t.u=0)}function ti(t,e){var n;n=e?e.f:t.R++;var r=tr(t.B);or(r,"SID",t.J),or(r,"RID",n),or(r,"AID",t.P),ei(t,r),t.i&&t.l&&Gr(r,t.i,t.l),n=new Rn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ni(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Sr(t.b,n),Mn(n,r,e)}function ei(t,e){t.f&&Wn({},function(t,n){or(e,n,t)})}function ni(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Vt(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Nr(l,s,"req"+c+"_")}catch(zi){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ri(t){t.a||t.j||(t.T=1,tn(t.Aa,t),t.o=0)}function ii(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Tn(Vt(t.Aa,t),ci(t,t.o)),t.o++,0))}function oi(t){null!=t.s&&(At.clearTimeout(t.s),t.s=null)}function si(t){t.a=new Rn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=tr(t.la);or(e,"RID","rpc"),or(e,"SID",t.J),or(e,"CI",t.H?"0":"1"),or(e,"AID",t.P),ei(t,e),or(e,"TYPE","xmlhttp"),t.i&&t.l&&Gr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=sr(tr(e)),n.j=null,n.I=!0,Ln(n,t)}function ai(t){null!=t.m&&(At.clearTimeout(t.m),t.m=null)}function ui(t,e){var n=null;if(t.a==e){ai(t),oi(t),t.a=null;var r=2}else{if(!Cr(t.b,e))return;n=e.s,Ar(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Mt()-e.u;var i=t.u;Ke(r=vn(),new In(r,n,e,i)),Jr(t)}else ri(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Or(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Tn(Vt(t.Ba,t,e),ci(t,t.u)),t.u++,0)))}(t,e)||2==r&&ii(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:li(t,5);break;case 4:li(t,10);break;case 3:li(t,6);break;default:li(t,2)}}function ci(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function li(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Vt(t.Ya,t);n||(n=new Jn("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||er(n,"https"),sr(n)),function(t,e){var n=new pn;if(At.Image){var r=new Image;r.onload=Ft(jr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ft(jr,n,r,"TestLoadImage: error",!1,e),r.onabort=Ft(jr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ft(jr,n,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else En(2);t.v=0,t.f&&t.f.ra(e),hi(t),Xr(t)}function hi(t){t.v=0,t.I=-1,t.f&&(0==xr(t.b).length&&0==t.g.length||(t.b.c.length=0,zt(t.g),t.g.length=0),t.f.qa())}function fi(t,e,n){var r=function(t){return t instanceof Jn?tr(t):new Jn(t,void 0)}(n);if(""!=r.c)e&&nr(r,e+"."+r.c),rr(r,r.h);else{var i=At.location;r=function(t,e,n,r){var i=new Jn(null,void 0);return t&&er(i,t),e&&nr(i,e),n&&rr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Zt(t.V,function(t,e){or(r,e,t)}),n=t.na,(e=t.A)&&n&&or(r,e,n),or(r,"VER",t.ha),ei(t,r),r}function di(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(t.Na)).F=t.C,e}function pi(){}function yi(){if(se&&!(10<=Number(me)))throw Error("Environmental error: no available transport.")}function gi(t,e){ze.call(this),this.a=new Wr(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Kt(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kt(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new bi(this)}function mi(t){Dn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function vi(){Nn.call(this),this.status=1}function bi(t){this.a=t}(Ot=Pr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:xn),this.a.onreadystatechange=Vt(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Ur(this,o)}t=n||"";var i=new Yn(this.headers);r&&Wn(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Lr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=At.FormData&&t instanceof At.FormData,!(0<=qt(Mr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{zr(this),0<this.o&&((this.D=function(t){return se&&ge(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Vt(this.xa,this)):this.m=an(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Ur(this,o)}},Ot.xa=function(){void 0!==St&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ke(this,"timeout"),this.abort(8))},Ot.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ke(this,"complete"),Ke(this,"abort"),Hr(this))},Ot.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Hr(this,!0)),Pr.X.G.call(this)},Ot.za=function(){this.j||(this.A||this.l||this.g?Br(this):this.Ua())},Ot.Ua=function(){Br(this)},Ot.W=function(){try{return 2<Kr(this)?this.a.status:-1}catch(ie){return-1}},Ot.$=function(){try{return this.a?this.a.responseText:""}catch(ie){return""}},Ot.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Rr(e)}},Ot.ua=function(){return this.h},Ot.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ot=Wr.prototype).ha=8,Ot.v=1,Ot.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Rn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ee(r=Jt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ni(this,n,e),or(i=tr(this.B),"RID",t),or(i,"CVER",22),this.A&&or(i,"X-HTTP-Session-Id",this.A),ei(this,i),this.i&&r&&Gr(i,this.i,r),Sr(this.b,n),this.Ia&&or(i,"TYPE","init"),this.da?(or(i,"$req",e),or(i,"SID","null"),n.U=!0,Mn(n,i,null)):Mn(n,i,e),this.v=2}}else 3==this.v&&(t?ti(this,t):0==this.g.length||Tr(this.b)||ti(this))},Ot.Aa=function(){if(this.j=null,si(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Tn(Vt(this.Ta,this),t)}},Ot.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,En(10),$r(this),si(this))},Ot.Sa=function(){null!=this.m&&(this.m=null,$r(this),ii(this),En(19))},Ot.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),En(2)):(this.c.info("Failed to ping google.com"),En(1))},(Ot=pi.prototype).ta=function(){},Ot.sa=function(){},Ot.ra=function(){},Ot.qa=function(){},Ot.Ja=function(){},yi.prototype.a=function(t,e){return new gi(t,e)},Lt(gi,ze),gi.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;En(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=fi(t,null,t.fa),Jr(t)},gi.prototype.close=function(){Yr(this.a)},gi.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Zr(this.a,e)}else this.l?((e={}).__data__=Qe(t),Zr(this.a,e)):Zr(this.a,t)},gi.prototype.G=function(){this.a.f=null,delete this.f,Yr(this.a),delete this.a,gi.X.G.call(this)},Lt(mi,Dn),Lt(vi,Nn),Lt(bi,pi),bi.prototype.ta=function(){Ke(this.a,"a")},bi.prototype.sa=function(t){Ke(this.a,new mi(t))},bi.prototype.ra=function(t){Ke(this.a,new vi(t))},bi.prototype.qa=function(){Ke(this.a,"b")},yi.prototype.createWebChannel=yi.prototype.a,gi.prototype.send=gi.prototype.h,gi.prototype.open=gi.prototype.g,gi.prototype.close=gi.prototype.close,On.NO_ERROR=0,On.TIMEOUT=8,On.HTTP_ERROR=6,Cn.COMPLETE="complete",An.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",ze.prototype.listen=ze.prototype.va,Pr.prototype.listenOnce=Pr.prototype.wa,Pr.prototype.getLastError=Pr.prototype.Qa,Pr.prototype.getLastErrorCode=Pr.prototype.ua,Pr.prototype.getStatus=Pr.prototype.W,Pr.prototype.getResponseJson=Pr.prototype.Pa,Pr.prototype.getResponseText=Pr.prototype.$,Pr.prototype.send=Pr.prototype.ba;var wi=On,_i=Cn,Ei=gn,Ii=An,Ti=Pr,Oi=n("mrSG"),Ci=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ci.o=-1;var Si={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ai=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Oi.c)(e,t),e}(Error),xi=new Et.b("@firebase/firestore");function ki(){return xi.logLevel}function Di(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xi.logLevel<=Et.a.DEBUG){var r=e.map(Ri);xi.debug.apply(xi,Object(Oi.f)(["Firestore (8.6.2): "+t],r))}}function Ni(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xi.logLevel<=Et.a.ERROR){var r=e.map(Ri);xi.error.apply(xi,Object(Oi.f)(["Firestore (8.6.2): "+t],r))}}function ji(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xi.logLevel<=Et.a.WARN){var r=e.map(Ri);xi.warn.apply(xi,Object(Oi.f)(["Firestore (8.6.2): "+t],r))}}function Ri(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(jp){return t}}function Pi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.2) INTERNAL ASSERTION FAILED: "+t;throw Ni(e),new Error(e)}function Vi(t,e){t||Pi()}function Fi(t,e){return t}function Mi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Li=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Mi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ui(t,e){return t<e?-1:t>e?1:0}function qi(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Bi(t){return t+"\0"}var Hi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ai(Si.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ai(Si.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ai(Si.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ai(Si.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ui(this.nanoseconds,t.nanoseconds):Ui(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),zi=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Hi(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Ki(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Wi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Pi(),void 0===n?n=t.length-e:n>t.length-e&&Pi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Oi.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ai(Si.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Wi),$i=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Oi.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return $i.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ai(Si.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ai(Si.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ai(Si.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ai(Si.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Wi),Zi=function(){function t(t){this.fields=t,t.sort(Xi.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return qi(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Ji=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ui(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Ji.EMPTY_BYTE_STRING=new Ji("");var to=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(t){if(Vi(!!t),"string"==typeof t){var e=0,n=to.exec(t);if(Vi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:no(t.seconds),nanos:no(t.nanos)}}function no(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ro(t){return"string"==typeof t?Ji.fromBase64String(t):Ji.fromUint8Array(t)}function io(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function oo(t){var e=t.mapValue.fields.__previous_value__;return io(e)?oo(e):e}function so(t){var e=eo(t.mapValue.fields.__local_write_time__.timestampValue);return new Hi(e.seconds,e.nanos)}function ao(t){return null==t}function uo(t){return 0===t&&1/t==-1/0}function co(t){return"number"==typeof t&&Number.isInteger(t)&&!uo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var lo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Yi.fromString(e))},t.fromName=function(e){return new t(Yi.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Yi.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Yi.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Yi(e.slice()))},t}();function ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?io(t)?4:10:Pi()}function fo(t,e){var n=ho(t);if(n!==ho(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return so(t).isEqual(so(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=eo(t.timestampValue),r=eo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ro(t.bytesValue).isEqual(ro(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return no(t.geoPointValue.latitude)===no(e.geoPointValue.latitude)&&no(t.geoPointValue.longitude)===no(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return no(t.integerValue)===no(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=no(t.doubleValue),r=no(e.doubleValue);return n===r?uo(n)===uo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return qi(t.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ki(n)!==Ki(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!fo(n[i],r[i])))return!1;return!0}(t,e);default:return Pi()}}function po(t,e){return void 0!==(t.values||[]).find(function(t){return fo(t,e)})}function yo(t,e){var n=ho(t),r=ho(e);if(n!==r)return Ui(n,r);switch(n){case 0:return 0;case 1:return Ui(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=no(t.integerValue||t.doubleValue),r=no(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return go(t.timestampValue,e.timestampValue);case 4:return go(so(t),so(e));case 5:return Ui(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ro(t),r=ro(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ui(n[i],r[i]);if(0!==o)return o}return Ui(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ui(no(t.latitude),no(e.latitude));return 0!==n?n:Ui(no(t.longitude),no(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=yo(n[i],r[i]);if(o)return o}return Ui(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ui(r[s],o[s]);if(0!==a)return a;var u=yo(n[r[s]],i[o[s]]);if(0!==u)return u}return Ui(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Pi()}}function go(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ui(t,e);var n=eo(t),r=eo(e),i=Ui(n.seconds,r.seconds);return 0!==i?i:Ui(n.nanos,r.nanos)}function mo(t){return vo(t)}function vo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=eo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ro(t.bytesValue).toBase64():"referenceValue"in t?lo.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=vo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+vo(t.fields[o])}return e+"}"}(t.mapValue):Pi();var e}function bo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function wo(t){return!!t&&"integerValue"in t}function _o(t){return!!t&&"arrayValue"in t}function Eo(t){return!!t&&"nullValue"in t}function Io(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function To(t){return!!t&&"mapValue"in t}var Oo=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Xi.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return fo(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ho(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=To(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Xi.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!To(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Co(t){var e=[];return Gi(t.fields||{},function(t,n){var r=new Xi([t]);if(To(n)){var i=Co(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Zi(e)}var So=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,zi.min(),Oo.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Oo.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Oo.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ao=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function xo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ao(t,e,n,r,i,o,s)}function ko(t){var e=Fi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+mo(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),ao(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ho(e.startAt)),e.endAt&&(n+="|ub:",n+=Ho(e.endAt)),e.h=n}return e.h}function Do(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ko(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!fo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qo(t.startAt,e.startAt)&&Qo(t.endAt,e.endAt)}function No(t){return lo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var jo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Oi.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ro(t,n,r):"array-contains"===n?new Mo(t,r):"in"===n?new Lo(t,r):"not-in"===n?new Uo(t,r):"array-contains-any"===n?new qo(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Po(t,n):new Vo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(yo(e,this.value)):null!==e&&ho(this.value)===ho(e)&&this.m(yo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Pi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Ro=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=lo.fromName(r.referenceValue),i}return Object(Oi.c)(e,t),e.prototype.matches=function(t){var e=lo.comparator(t.key,this.key);return this.m(e)},e}(jo),Po=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Fo(0,n),r}return Object(Oi.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(jo),Vo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Fo(0,n),r}return Object(Oi.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(jo);function Fo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return lo.fromName(t.referenceValue)})}var Mo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Oi.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return _o(e)&&po(e.arrayValue,this.value)},e}(jo),Lo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Oi.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&po(this.value.arrayValue,e)},e}(jo),Uo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Oi.c)(e,t),e.prototype.matches=function(t){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!po(this.value.arrayValue,e)},e}(jo),qo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Oi.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!_o(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return po(e.value.arrayValue,t)})},e}(jo),Bo=function(t,e){this.position=t,this.before=e};function Ho(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return mo(t)}).join(",")}var zo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ko(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Go(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?lo.comparator(lo.fromName(s.referenceValue),n.key):yo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Qo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!fo(t.position[n],e.position[n]))return!1;return!0}var Wo=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Yo(t,e,n,r,i,o,s,a){return new Wo(t,e,n,r,i,o,s,a)}function $o(t){return new Wo(t)}function Xo(t){return!ao(t.limit)&&"F"===t.limitType}function Zo(t){return!ao(t.limit)&&"L"===t.limitType}function Jo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ts(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function es(t){return null!==t.collectionGroup}function ns(t){var e=Fi(t);if(null===e.p){e.p=[];var n=ts(e),r=Jo(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new zo(n)),e.p.push(new zo(Xi.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new zo(Xi.keyField(),u))}}}return e.p}function rs(t){var e=Fi(t);if(!e.T)if("F"===e.limitType)e.T=xo(e.path,e.collectionGroup,ns(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ns(e);r<i.length;r++){var o=i[r];n.push(new zo(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Bo(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Bo(e.startAt.position,!e.startAt.before):null;e.T=xo(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function is(t,e,n){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function os(t,e){return Do(rs(t),rs(e))&&t.limitType===e.limitType}function ss(t){return ko(rs(t))+"|lt:"+t.limitType}function as(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+mo(e.value);var e}).join(", ")+"]"),ao(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ho(t.startAt)),t.endAt&&(e+=", endAt: "+Ho(t.endAt)),"Target("+e+")"}(rs(t))+"; limitType="+t.limitType+")"}function us(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):lo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Go(t.startAt,ns(t),e)||t.endAt&&Go(t.endAt,ns(t),e))}(t,e)}function cs(t){return function(e,n){for(var r=!1,i=0,o=ns(t);i<o.length;i++){var s=o[i],a=ls(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function ls(t,e,n){var r=t.field.isKeyField()?lo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?yo(r,i):Pi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pi()}}function hs(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uo(e)?"-0":e}}function fs(t){return{integerValue:""+t}}function ds(t,e){return co(e)?fs(e):hs(t,e)}var ps=function(){this._=void 0};function ys(t,e,n){return t instanceof vs?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof bs?ws(t,e):t instanceof _s?Es(t,e):function(t,e){var n=ms(t,e),r=Ts(n)+Ts(t.A);return wo(n)&&wo(t.A)?fs(r):hs(t.R,r)}(t,e)}function gs(t,e,n){return t instanceof bs?ws(t,e):t instanceof _s?Es(t,e):n}function ms(t,e){return t instanceof Is?wo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Oi.c)(e,t),e}(ps),bs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Oi.c)(e,t),e}(ps);function ws(t,e){for(var n=Os(e),r=function(t){n.some(function(e){return fo(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var _s=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Oi.c)(e,t),e}(ps);function Es(t,e){for(var n=Os(e),r=function(t){n=n.filter(function(e){return!fo(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Is=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Oi.c)(e,t),e}(ps);function Ts(t){return no(t.integerValue||t.doubleValue)}function Os(t){return _o(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Cs=function(t,e){this.field=t,this.transform=e},Ss=function(t,e){this.version=t,this.transformResults=e},As=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function xs(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ks=function(){};function Ds(t,e,n){t instanceof Vs?function(t,e,n){var r=t.value.clone(),i=Ls(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Fs?function(t,e,n){if(xs(t.precondition,e)){var r=Ls(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ms(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ns(t,e,n){t instanceof Vs?function(t,e,n){if(xs(t.precondition,e)){var r=t.value.clone(),i=Us(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ps(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Fs?function(t,e,n){if(xs(t.precondition,e)){var r=Us(t.fieldTransforms,n,e),i=e.data;i.setAll(Ms(t)),i.setAll(r),e.convertToFoundDocument(Ps(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){xs(t.precondition,e)&&e.convertToNoDocument(zi.min())}(t,e)}function js(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=ms(o.transform,s||null);null!=a&&(null==n&&(n=Oo.empty()),n.set(o.field,a))}return n||null}function Rs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&qi(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof bs&&e instanceof bs||t instanceof _s&&e instanceof _s?qi(t.elements,e.elements,fo):t instanceof Is&&e instanceof Is?fo(t.A,e.A):t instanceof vs&&e instanceof vs}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ps(t){return t.isFoundDocument()?t.version:zi.min()}var Vs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Oi.c)(e,t),e}(ks),Fs=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Oi.c)(e,t),e}(ks);function Ms(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Ls(t,e,n){var r=new Map;Vi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gs(s,a,n[i]))}return r}function Us(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,ys(a,u,e))}return r}var qs,Bs,Hs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Oi.c)(e,t),e}(ks),zs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Oi.c)(e,t),e}(ks),Ks=function(t){this.count=t};function Gs(t){switch(t){case Si.OK:return Pi();case Si.CANCELLED:case Si.UNKNOWN:case Si.DEADLINE_EXCEEDED:case Si.RESOURCE_EXHAUSTED:case Si.INTERNAL:case Si.UNAVAILABLE:case Si.UNAUTHENTICATED:return!1;case Si.INVALID_ARGUMENT:case Si.NOT_FOUND:case Si.ALREADY_EXISTS:case Si.PERMISSION_DENIED:case Si.FAILED_PRECONDITION:case Si.ABORTED:case Si.OUT_OF_RANGE:case Si.UNIMPLEMENTED:case Si.DATA_LOSS:return!0;default:return Pi()}}function Qs(t){if(void 0===t)return Ni("GRPC error has no .code"),Si.UNKNOWN;switch(t){case qs.OK:return Si.OK;case qs.CANCELLED:return Si.CANCELLED;case qs.UNKNOWN:return Si.UNKNOWN;case qs.DEADLINE_EXCEEDED:return Si.DEADLINE_EXCEEDED;case qs.RESOURCE_EXHAUSTED:return Si.RESOURCE_EXHAUSTED;case qs.INTERNAL:return Si.INTERNAL;case qs.UNAVAILABLE:return Si.UNAVAILABLE;case qs.UNAUTHENTICATED:return Si.UNAUTHENTICATED;case qs.INVALID_ARGUMENT:return Si.INVALID_ARGUMENT;case qs.NOT_FOUND:return Si.NOT_FOUND;case qs.ALREADY_EXISTS:return Si.ALREADY_EXISTS;case qs.PERMISSION_DENIED:return Si.PERMISSION_DENIED;case qs.FAILED_PRECONDITION:return Si.FAILED_PRECONDITION;case qs.ABORTED:return Si.ABORTED;case qs.OUT_OF_RANGE:return Si.OUT_OF_RANGE;case qs.UNIMPLEMENTED:return Si.UNIMPLEMENTED;case qs.DATA_LOSS:return Si.DATA_LOSS;default:return Pi()}}(Bs=qs||(qs={}))[Bs.OK=0]="OK",Bs[Bs.CANCELLED=1]="CANCELLED",Bs[Bs.UNKNOWN=2]="UNKNOWN",Bs[Bs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bs[Bs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bs[Bs.NOT_FOUND=5]="NOT_FOUND",Bs[Bs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bs[Bs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bs[Bs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bs[Bs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bs[Bs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bs[Bs.ABORTED=10]="ABORTED",Bs[Bs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bs[Bs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bs[Bs.INTERNAL=13]="INTERNAL",Bs[Bs.UNAVAILABLE=14]="UNAVAILABLE",Bs[Bs.DATA_LOSS=15]="DATA_LOSS";var Ws=function(){function t(t,e){this.comparator=t,this.root=e||$s.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$s.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$s.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ys(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ys(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ys(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ys(this.root,t,this.comparator,!0)},t}(),Ys=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),$s=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Pi();if(this.right.isRed())throw Pi();var t=this.left.check();if(t!==this.right.check())throw Pi();return t+(this.isRed()?0:1)},t}();$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Pi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new $s(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Xs=function(){function t(t){this.comparator=t,this.data=new Ws(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Zs(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Zs(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Zs=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Js=new Ws(lo.comparator);function ta(){return Js}var ea=new Ws(lo.comparator);function na(){return ea}var ra=new Ws(lo.comparator);function ia(){return ra}var oa=new Xs(lo.comparator);function sa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=oa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var aa=new Xs(Ui);function ua(){return aa}var ca=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,la.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(zi.min(),r,ua(),ta(),sa())},t}(),la=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Ji.EMPTY_BYTE_STRING,n,sa(),sa(),sa())},t}(),ha=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},fa=function(t,e){this.targetId=t,this.V=e},da=function(t,e,n,r){void 0===n&&(n=Ji.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},pa=function(){function t(){this.S=0,this.D=ma(),this.C=Ji.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=sa(),e=sa(),n=sa();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Pi()}}),new la(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=ma()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ya=function(){function t(t){this.W=t,this.G=new Map,this.H=ta(),this.J=ga(),this.Y=new Xs(Ui)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Pi()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(No(i))if(0===n){var o=new lo(i.path);this.tt(e,o,So.newNoDocument(o,zi.min()))}else Vi(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.at=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&No(o.target)){var s=new lo(o.target.path);null!==e.H.get(s)||e.ut(i,s)||e.tt(i,s,So.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=sa();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ca(t,n,this.Y,this.H,r);return this.H=ta(),this.J=ga(),this.Y=new Xs(Ui),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.ut(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.ut(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new pa,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Xs(Ui),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Di("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new pa),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.ut=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ga(){return new Ws(lo.comparator)}function ma(){return new Ws(lo.comparator)}var va={asc:"ASCENDING",desc:"DESCENDING"},ba={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wa=function(t,e){this.databaseId=t,this.I=e};function _a(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ea(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ia(t,e){return _a(t,e.toTimestamp())}function Ta(t){return Vi(!!t),zi.fromTimestamp(function(t){var e=eo(t);return new Hi(e.seconds,e.nanos)}(t))}function Oa(t,e){return function(t){return new Yi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ca(t){var e=Yi.fromString(t);return Vi($a(e)),e}function Sa(t,e){return Oa(t.databaseId,e.path)}function Aa(t,e){var n=Ca(e);if(n.get(1)!==t.databaseId.projectId)throw new Ai(Si.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ai(Si.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lo(Na(n))}function xa(t,e){return Oa(t.databaseId,e)}function ka(t){var e=Ca(t);return 4===e.length?Yi.emptyPath():Na(e)}function Da(t){return new Yi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Na(t){return Vi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ja(t,e,n){return{name:Sa(t,e),fields:n.toProto().mapValue.fields}}function Ra(t,e,n){var r=Aa(t,e.name),i=Ta(e.updateTime),o=new Oo({mapValue:{fields:e.fields}}),s=So.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Pa(t,e){var n;if(e instanceof Vs)n={update:ja(t,e.key,e.value)};else if(e instanceof Hs)n={delete:Sa(t,e.key)};else if(e instanceof Fs)n={update:ja(t,e.key,e.data),updateMask:Ya(e.fieldMask)};else{if(!(e instanceof zs))return Pi();n={verify:Sa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof vs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bs)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _s)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Is)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Pi()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ia(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Pi()}(t,e.precondition)),n}function Va(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?As.updateTime(Ta(t.updateTime)):void 0!==t.exists?As.exists(t.exists):As.none()}(e.currentDocument):As.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Vi("REQUEST_TIME"===e.setToServerValue),n=new vs):"appendMissingElements"in e?n=new bs(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new _s(e.removeAllFromArray.values||[]):"increment"in e?n=new Is(t,e.increment):Pi();var r=Xi.fromServerFormat(e.fieldPath);return new Cs(r,n)}(t,e)}):[];if(e.update){var i=Aa(t,e.update.name),o=new Oo({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Zi((t.fieldPaths||[]).map(function(t){return Xi.fromServerFormat(t)}))}(e.updateMask);return new Fs(i,o,s,n,r)}return new Vs(i,o,n,r)}if(e.delete){var a=Aa(t,e.delete);return new Hs(a,n)}if(e.verify){var u=Aa(t,e.verify);return new zs(u,n)}return Pi()}function Fa(t,e){return{documents:[xa(t,e.path)]}}function Ma(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=xa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Io(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NAN"}};if(Eo(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Io(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NAN"}};if(Eo(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(t.field),op:za(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Ka(t.field),direction:Ha(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ao(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=qa(e.startAt)),e.endAt&&(n.structuredQuery.endAt=qa(e.endAt)),n}function La(t){var e=ka(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Vi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ua(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new zo(Ga(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return ao(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ba(n.startAt));var l=null;return n.endAt&&(l=Ba(n.endAt)),Yo(e,i,a,s,u,"F",c,l)}function Ua(t){return t?void 0!==t.unaryFilter?[Wa(t)]:void 0!==t.fieldFilter?[Qa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Ua(t)}).reduce(function(t,e){return t.concat(e)}):Pi():[]}function qa(t){return{before:t.before,values:t.position}}function Ba(t){return new Bo(t.values||[],!!t.before)}function Ha(t){return va[t]}function za(t){return ba[t]}function Ka(t){return{fieldPath:t.canonicalString()}}function Ga(t){return Xi.fromServerFormat(t.fieldPath)}function Qa(t){return jo.create(Ga(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Pi()}}(t.fieldFilter.op),t.fieldFilter.value)}function Wa(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ga(t.unaryFilter.field);return jo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ga(t.unaryFilter.field);return jo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ga(t.unaryFilter.field);return jo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ga(t.unaryFilter.field);return jo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Pi()}}function Ya(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function $a(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Xa(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ja(e)),e=Za(t.get(n),e);return Ja(e)}function Za(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ja(t){return t+"\x01\x01"}function tu(t){var e=t.length;if(Vi(e>=2),2===e)return Vi("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Yi.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Pi(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Pi()}o=s+2}return new Yi(r)}var eu=function(t,e){this.seconds=t,this.nanoseconds=e},nu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};nu.store="owner",nu.key="owner";var ru=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ru.store="mutationQueues",ru.keyPath="userId";var iu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};iu.store="mutations",iu.keyPath="batchId",iu.userMutationsIndex="userMutationsIndex",iu.userMutationsKeyPath=["userId","batchId"];var ou=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Xa(e)]},t.key=function(t,e,n){return[t,Xa(e),n]},t}();ou.store="documentMutations",ou.PLACEHOLDER=new ou;var su=function(t,e){this.path=t,this.readTime=e},au=function(t,e){this.path=t,this.version=e},uu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};uu.store="remoteDocuments",uu.readTimeIndex="readTimeIndex",uu.readTimeIndexPath="readTime",uu.collectionReadTimeIndex="collectionReadTimeIndex",uu.collectionReadTimeIndexPath=["parentPath","readTime"];var cu=function(t){this.byteSize=t};cu.store="remoteDocumentGlobal",cu.key="remoteDocumentGlobalKey";var lu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};lu.store="targets",lu.keyPath="targetId",lu.queryTargetsIndexName="queryTargetsIndex",lu.queryTargetsKeyPath=["canonicalId","targetId"];var hu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};hu.store="targetDocuments",hu.keyPath=["targetId","path"],hu.documentTargetsIndex="documentTargetsIndex",hu.documentTargetsKeyPath=["path","targetId"];var fu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fu.key="targetGlobalKey",fu.store="targetGlobal";var du=function(t,e){this.collectionId=t,this.parent=e};du.store="collectionParents",du.keyPath=["collectionId","parent"];var pu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};pu.store="clientMetadata",pu.keyPath="clientId";var yu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};yu.store="bundles",yu.keyPath="bundleId";var gu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};gu.store="namedQueries",gu.keyPath="name";var mu=Object(Oi.f)(Object(Oi.f)([],Object(Oi.f)(Object(Oi.f)([],Object(Oi.f)(Object(Oi.f)([],Object(Oi.f)(Object(Oi.f)([],[ru.store,iu.store,ou.store,uu.store,lu.store,nu.store,fu.store,hu.store]),[pu.store])),[cu.store])),[du.store])),[yu.store,gu.store]),vu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),wu=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},_u=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Pi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Eu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new wu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ou(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=ku(e.target.error);n.ft.reject(new Ou(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ou(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Di("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Su(e)},t}(),Iu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(_t.i)())&&Ni("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Di("SimpleDb","Removing database:",t),Au(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(_t.i)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Oi.b)(this,void 0,void 0,function(){var e,n=this;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Di("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ou(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ai(Si.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ou(t,n))},i.onupgradeneeded=function(t){Di("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Di("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Oi.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Oi.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Oi.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Eu.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),_u.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Di("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Tu=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Au(this.Pt.delete())},t}(),Ou=function(t){function e(e,n){var r=this;return(r=t.call(this,Si.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Oi.c)(e,t),e}(Ai);function Cu(t){return"IndexedDbTransactionError"===t.name}var Su=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Di("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Di("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Au(n)},t.prototype.add=function(t){return Di("SimpleDb","ADD",this.store.name,t,t),Au(this.store.add(t))},t.prototype.get=function(t){var e=this;return Au(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Di("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Di("SimpleDb","DELETE",this.store.name,t),Au(this.store.delete(t))},t.prototype.count=function(){return Di("SimpleDb","COUNT",this.store.name),Au(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Di("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new _u(function(n,r){e.onerror=function(t){var e=ku(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new _u(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Tu(i),s=e(i.primaryKey,i.value,o);if(s instanceof _u){var a=s.catch(function(t){return o.done(),_u.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return _u.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Au(t){return new _u(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ku(t.target.error);n(e)}})}var xu=!1;function ku(t){var e=Iu._t(Object(_t.i)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ai("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xu||(xu=!0,setTimeout(function(){throw r},0)),r}}return t}var Du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Oi.c)(e,t),e}(bu);function Nu(t,e){var n=Fi(t);return Iu.It(n.Mt,e)}var ju=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ds(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Ns(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Ns(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(zi.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},sa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&qi(this.mutations,t.mutations,function(t,e){return Rs(t,e)})&&qi(this.baseMutations,t.baseMutations,function(t,e){return Rs(t,e)})},t}(),Ru=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Vi(e.mutations.length===r.length);for(var i=ia(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Pu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=zi.min()),void 0===o&&(o=zi.min()),void 0===s&&(s=Ji.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Vu=function(t){this.Lt=t};function Fu(t,e){if(e.document)return Ra(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=lo.fromSegments(e.noDocument.path),r=Bu(e.noDocument.readTime),i=So.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=lo.fromSegments(e.unknownDocument.path);return r=Bu(e.unknownDocument.version),So.newUnknownDocument(o,r)}return Pi()}function Mu(t,e,n){var r=Lu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Sa(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:_a(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new uu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=qu(e.version);return s=e.hasCommittedMutations,new uu(null,new su(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=qu(e.version);return new uu(new au(c,l),null,null,!0,r,i)}return Pi()}function Lu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Uu(t){var e=new Hi(t[0],t[1]);return zi.fromTimestamp(e)}function qu(t){var e=t.toTimestamp();return new eu(e.seconds,e.nanoseconds)}function Bu(t){var e=new Hi(t.seconds,t.nanoseconds);return zi.fromTimestamp(e)}function Hu(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Va(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Va(t.Lt,e)}),o=Hi.fromMillis(e.localWriteTimeMs);return new ju(e.batchId,o,n,i)}function zu(t){var e,n,r=Bu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Bu(t.lastLimboFreeSnapshotVersion):zi.min();return void 0!==t.query.documents?(Vi(1===(n=t.query).documents.length),e=rs($o(ka(n.documents[0])))):e=function(t){return rs(La(t))}(t.query),new Pu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ji.fromBase64String(t.resumeToken))}function Ku(t,e){var n,r=qu(e.snapshotVersion),i=qu(e.lastLimboFreeSnapshotVersion);n=No(e.target)?Fa(t.Lt,e.target):Ma(t.Lt,e.target);var o=e.resumeToken.toBase64();return new lu(e.targetId,ko(e.target),r,o,e.sequenceNumber,i,n)}function Gu(t){var e=La({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?is(e,e.limit,"L"):e}var Qu=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Wu(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Bu(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Wu(t).put({bundleId:(n=e).id,createTime:qu(Ta(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Yu(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Gu(e.bundledQuery),readTime:Bu(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Yu(t).put(function(t){return{name:t.name,readTime:qu(Ta(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Wu(t){return Nu(t,yu.store)}function Yu(t){return Nu(t,gu.store)}var $u=function(){function t(){this.Bt=new Xu}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),_u.resolve()},t.prototype.getCollectionParents=function(t,e){return _u.resolve(this.Bt.getEntries(e))},t}(),Xu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Xs(Yi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Xs(Yi.comparator)).toArray()},t}(),Zu=function(){function t(){this.qt=new Xu}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Xa(i)};return Ju(t).put(o)}return _u.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Bi(e),""],!1,!0);return Ju(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(tu(o.parent))}return n})},t}();function Ju(t){return Nu(t,du.store)}var tc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ec=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function nc(t,e,n){var r=t.store(iu.store),i=t.store(ou.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Vi(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=ou.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return _u.waitFor(o).next(function(){return c})}function rc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Pi();e=t.noDocument}return JSON.stringify(e).length}ec.DEFAULT_COLLECTION_PERCENTILE=10,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ec.DEFAULT=new ec(41943040,ec.DEFAULT_COLLECTION_PERCENTILE,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ec.DISABLED=new ec(-1,0,0);var ic=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Vi(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sc(t).Ot({index:iu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ac(t),s=sc(t);return s.add({}).next(function(a){Vi("number"==typeof a);for(var u=new ju(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Pa(t.Lt,e)}),i=n.mutations.map(function(e){return Pa(t.Lt,e)});return new iu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Xs(function(t,e){return Ui(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],y=ou.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,ou.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),_u.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return sc(t).get(e).next(function(t){return t?(Vi(t.userId===n.userId),Hu(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?_u.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return sc(t).Ot({index:iu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Vi(e.batchId>=r),o=Hu(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return sc(t).Ot({index:iu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sc(t).Nt(iu.userMutationsIndex,n).next(function(t){return t.map(function(t){return Hu(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ou.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ac(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=tu(r[1]);if(a===n.userId&&e.path.isEqual(c))return sc(t).get(u).next(function(t){if(!t)throw Pi();Vi(t.userId===n.userId),o.push(Hu(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Xs(Ui),i=[];return e.forEach(function(e){var o=ou.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=ac(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=tu(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),_u.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ou.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Xs(Ui);return ac(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=tu(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(sc(t).get(e).next(function(t){if(null===t)throw Pi();Vi(t.userId===n.userId),r.push(Hu(n.R,t))}))}),_u.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return nc(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),_u.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return _u.resolve();var r=IDBKeyRange.lowerBound(ou.prefixForUser(e.userId)),i=[];return ac(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=tu(t[1]);i.push(o)}else r.done()}).next(function(){Vi(0===i.length)})})},t.prototype.containsKey=function(t,e){return oc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return uc(t).get(this.userId).next(function(t){return t||new ru(e.userId,-1,"")})},t}();function oc(t,e,n){var r=ou.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ac(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function sc(t){return Nu(t,iu.store)}function ac(t){return Nu(t,ou.store)}function uc(t){return Nu(t,ru.store)}var cc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),lc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new cc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return zi.fromTimestamp(new Hi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return hc(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Vi(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return hc(t).Ot(function(s,a){var u=zu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return _u.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return hc(t).Ot(function(t,n){var r=zu(n);e(r)})},t.prototype.Xt=function(t){return fc(t).get(fu.key).next(function(t){return Vi(null!==t),t})},t.prototype.Zt=function(t,e){return fc(t).put(fu.key,e)},t.prototype.te=function(t,e){return hc(t).put(Ku(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=ko(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hc(t).Ot({range:r,index:lu.queryTargetsIndexName},function(t,n,r){var o=zu(n);Do(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=dc(t);return e.forEach(function(e){var s=Xa(e.path);i.push(o.put(new hu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),_u.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=dc(t);return _u.forEach(e,function(e){var o=Xa(e.path);return _u.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=dc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=dc(t),i=sa();return r.Ot({range:n,kt:!0},function(t,e,n){var r=tu(t[1]),o=new lo(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Xa(e.path),r=IDBKeyRange.bound([n],[Bi(n)],!1,!0),i=0;return dc(t).Ot({index:hu.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return hc(t).get(e).next(function(t){return t?zu(t):null})},t}();function hc(t){return Nu(t,lu.store)}function fc(t){return Nu(t,fu.store)}function dc(t){return Nu(t,hu.store)}function pc(t){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(e){if(t.code!==Si.FAILED_PRECONDITION||t.message!==vu)throw t;return Di("LocalStore","Unexpectedly lost primary lease"),[2]})})}function yc(t,e){var n=t[1],r=e[1],i=Ui(t[0],e[0]);return 0===i?Ui(n,r):i}var gc=function(){function t(t){this.ne=t,this.buffer=new Xs(yc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();yc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),mc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ae(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ae=function(t){var e=this,n=this.oe?3e5:6e4;Di("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Oi.b)(e,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Cu(e=n.sent())?(Di("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,pc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ae(t)];case 8:return n.sent(),[2]}})})})},t}(),vc=function(){function t(t,e){this.ue=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ue.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return _u.resolve(Ci.o);var r=new gc(e);return this.ue.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ue.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ue.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ue.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Di("LruGarbageCollector","Garbage collection skipped; disabled"),_u.resolve(tc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Di("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),tc):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ue.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Di("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),ki()<=Et.a.DEBUG&&Di("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),_u.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),bc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new vc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return wc(t,n)},t.prototype.removeReference=function(t,e,n){return wc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return wc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return uc(t).$t(function(r){return oc(t,r,e).next(function(t){return t&&(n=!0),_u.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),dc(t).delete([0,Xa(s.path)])})});i.push(u)}}).next(function(){return _u.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return wc(t,e)},t.prototype.we=function(t,e){var n,r=dc(t),i=Ci.o;return r.Ot({index:hu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ci.o&&e(new lo(tu(n)),i),i=s,n=o):i=Ci.o}).next(function(){i!==Ci.o&&e(new lo(tu(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function wc(t,e){return dc(t).put(function(t,e){return new hu(0,Xa(t.path),e)}(e,t.currentSequenceNumber))}var _c=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Gi(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Qi(this.inner)},t}(),Ec=function(){function t(){this.changes=new _c(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:zi.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:So.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?_u.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Ic=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Cc(t).put(Sc(e),n)},t.prototype.removeEntry=function(t,e){var n=Cc(t),r=Sc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Cc(t).get(Sc(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Cc(t).get(Sc(e)).next(function(t){return{document:n.ye(e,t),size:rc(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ta();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ta(),i=new Ws(lo.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,rc(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return _u.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Cc(t).Ot({range:r},function(t,e,r){for(var s=lo.fromSegments(t);o&&lo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ta(),o=e.path.length+1,s={};if(n.isEqual(zi.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Lu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=uu.collectionReadTimeIndex}return Cc(t).Ot(s,function(t,n,s){if(t.length===o){var a=Fu(r.R,n);e.path.isPrefixOf(a.key.path)?us(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Tc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Oc(t).get(cu.key).next(function(t){return Vi(!!t),t})},t.prototype.me=function(t,e){return Oc(t).put(cu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Fu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(zi.min()))return n}return So.newInvalidDocument(t)},t}(),Tc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new _c(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Oi.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Xs(function(t,e){return Ui(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Mu(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=rc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Mu(e.Ie.R,So.newNoDocument(o,zi.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),_u.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Ec);function Oc(t){return Nu(t,cu.store)}function Cc(t){return Nu(t,uu.store)}function Sc(t){return t.path.toArray()}var Ac=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Vi(n<r&&n>=0&&r<=11);var o=new Eu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(nu.store)}(t),function(t){t.createObjectStore(ru.store,{keyPath:ru.keyPath}),t.createObjectStore(iu.store,{keyPath:iu.keyPath,autoIncrement:!0}).createIndex(iu.userMutationsIndex,iu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ou.store)}(t),xc(t),function(t){t.createObjectStore(uu.store)}(t));var s=_u.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(hu.store),t.deleteObjectStore(lu.store),t.deleteObjectStore(fu.store)}(t),xc(t)),s=s.next(function(){return function(t){var e=t.store(fu.store),n=new fu(0,0,zi.min().toTimestamp(),0);return e.put(fu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(iu.store).Nt().next(function(n){t.deleteObjectStore(iu.store),t.createObjectStore(iu.store,{keyPath:iu.keyPath,autoIncrement:!0}).createIndex(iu.userMutationsIndex,iu.userMutationsKeyPath,{unique:!0});var r=e.store(iu.store),i=n.map(function(t){return r.put(t)});return _u.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(pu.store,{keyPath:pu.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(cu.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(uu.store);e.createIndex(uu.readTimeIndex,uu.readTimeIndexPath,{unique:!1}),e.createIndex(uu.collectionReadTimeIndex,uu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(yu.store,{keyPath:yu.keyPath})}(t),function(t){t.createObjectStore(gu.store,{keyPath:gu.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(uu.store).Ot(function(t,n){e+=rc(n)}).next(function(){var n=new cu(e);return t.store(cu.store).put(cu.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(ru.store),r=t.store(iu.store);return n.Nt().next(function(n){return _u.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(iu.userMutationsIndex,i).next(function(r){return _u.forEach(r,function(r){Vi(r.userId===n.userId);var i=Hu(e.R,r);return nc(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(hu.store),n=t.store(uu.store);return t.store(fu.store).get(fu.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Yi(n),s=function(t){return[0,Xa(t)]}(o);r.push(e.get(s).next(function(n){return n?_u.resolve():function(n){return e.put(new hu(0,Xa(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return _u.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(du.store,{keyPath:du.keyPath});var n=e.store(du.store),r=new Xu,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Xa(i)})}};return e.store(uu.store).Ot({kt:!0},function(t,e){var n=new Yi(t);return i(n.popLast())}).next(function(){return e.store(ou.store).Ot({kt:!0},function(t,e){var n=tu(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(lu.store);return n.Ot(function(t,r){var i=zu(r),o=Ku(e.R,i);return n.put(o)})},t}();function xc(t){t.createObjectStore(hu.store,{keyPath:hu.keyPath}).createIndex(hu.documentTargetsIndex,hu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(lu.store,{keyPath:lu.keyPath}).createIndex(lu.queryTargetsIndexName,lu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fu.store)}var kc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Dc=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ai(Si.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bc(this,i),this.Le=n+"main",this.R=new Vu(u),this.Be=new Iu(this.Le,11,new Ac(this.R)),this.qe=new lc(this.referenceDelegate,this.R),this.Ut=new Zu,this.Ue=function(t,e){return new Ic(t,e)}(this.R,this.Ut),this.Qe=new Qu,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Ni("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ai(Si.FAILED_PRECONDITION,kc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Ci(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Oi.b)(e,void 0,void 0,function(){return Object(Oi.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Oi.b)(e,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Oi.b)(e,void 0,void 0,function(){return Object(Oi.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return jc(e).put(new pu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Cu(e))return Di("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Di("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Nc(t).get(nu.key).next(function(t){return _u.resolve(e.tn(t))})},t.prototype.en=function(t){return jc(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Nu(t,pu.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return _u.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?_u.resolve(!0):Nc(t).get(nu.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ai(Si.FAILED_PRECONDITION,kc);return!1}}return!(!e.networkEnabled||!e.inForeground)||jc(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Di("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t=this;return Object(Oi.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.an(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.un(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[nu.store,pu.store],function(e){var n=new Du(e,Ci.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return jc(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ic.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Di("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",mu,function(o){return r=new Du(o,i.Ne?i.Ne.next():Ci.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Ni("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Ai(Si.FAILED_PRECONDITION,vu);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Nc(t).get(nu.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ai(Si.FAILED_PRECONDITION,kc)})},t.prototype.Ze=function(t){var e=new nu(this.clientId,this.allowTabSynchronization,Date.now());return Nc(t).put(nu.key,e)},t.yt=function(){return Iu.yt()},t.prototype.Xe=function(t){var e=this,n=Nc(t);return n.get(nu.key).next(function(t){return e.tn(t)?(Di("IndexedDbPersistence","Releasing primary lease."),n.delete(nu.key)):_u.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ni("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.un=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.an(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Di("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ni("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.an=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ni("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Nc(t){return Nu(t,nu.store)}function jc(t){return Nu(t,pu.store)}function Rc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pc=function(t,e){this.progress=t,this.wn=e},Vc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return lo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):es(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new lo(e)).next(function(t){var e=na();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=na();return this.Ut.getCollectionParents(t,i).next(function(s){return _u.forEach(s,function(s){var a=function(t,e){return new Wo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=So.newInvalidDocument(c),r=r.insert(c,l)),Ns(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){us(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=sa(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Fs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Fc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=sa(),i=sa(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Mc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(zi.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Xo(e)||Zo(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(ki()<=Et.a.DEBUG&&Di("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),as(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Xs(cs(t));return e.forEach(function(e,r){us(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ki()<=Et.a.DEBUG&&Di("QueryEngine","Using full collection scan to execute query:",as(e)),this.Sn.getDocumentsMatchingQuery(t,e,zi.min())},t}(),Lc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ws(Ui),this.kn=new _c(function(t){return ko(t)},Do),this.On=zi.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Vc(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Uc(t,e,n,r){return new Lc(t,e,n,r)}function qc(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Oi.d)(this,function(s){switch(s.label){case 0:return n=Fi(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Vc(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=sa(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,g=p.mutations;y<g.length;y++)s=s.add(g[y].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Bc(t,e){var n=Fi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=_u.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Vi(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Hc(t){var e=Fi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function zc(t,e){var n=Fi(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Vi(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ta();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Kc(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(zi.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return _u.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Kc(t,e,n,r,i){var o=sa();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ta();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(zi.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Di("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Gc(t,e){var n=Fi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Qc(t,e){var n=Fi(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?_u.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Pu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Wc(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Oi.d)(this,function(a){switch(a.label){case 0:r=Fi(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Cu(s=a.sent()))throw s;return Di("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Yc(t,e,n){var r=Fi(t),i=zi.min(),o=sa();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Fi(t),i=r.kn.get(n);return void 0!==i?_u.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,rs(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:zi.min(),n?o:sa())}).next(function(t){return{documents:t,Bn:o}})})}function $c(t,e){var n=Fi(t),r=Fi(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Xc(t){var e=Fi(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Fi(t),i=ta(),o=Lu(n),s=Cc(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:uu.readTimeIndex,range:a},function(t,e){var n=Fu(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Uu(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function Zc(t){return Object(Oi.b)(this,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){return[2,(e=Fi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Cc(t),n=zi.min();return e.Ot({index:uu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Uu(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Jc(t,e,n,r){return Object(Oi.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Oi.d)(this,function(p){switch(p.label){case 0:for(i=Fi(t),o=sa(),s=ta(),a=ia(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Qc(i,function(t){return rs($o(Yi.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Kc(t,f,s,zi.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function tl(t,e,n){return void 0===n&&(n=sa()),Object(Oi.b)(this,void 0,void 0,function(){var r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return[4,Qc(t,rs(Gu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Fi(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Ta(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Ji.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var el=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return _u.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ta(n.createTime)}),_u.resolve()},t.prototype.getNamedQuery=function(t,e){return _u.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Gu(t.bundledQuery),readTime:Ta(t.readTime)}}(e)),_u.resolve()},t}(),nl=function(){function t(){this.Wn=new Xs(rl.Gn),this.zn=new Xs(rl.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new rl(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new rl(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new lo(new Yi([])),r=new rl(n,t),i=new rl(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new lo(new Yi([])),n=new rl(e,t),r=new rl(e,t+1),i=sa();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new rl(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),rl=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return lo.comparator(t.key,e.key)||Ui(t.ns,e.ns)},t.Hn=function(t,e){return Ui(t.ns,e.ns)||lo.comparator(t.key,e.key)},t}(),il=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Xs(rl.Gn)}return t.prototype.checkEmpty=function(t){return _u.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new ju(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new rl(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return _u.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return _u.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return _u.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return _u.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return _u.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new rl(e,0),i=new rl(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),_u.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Xs(Ui);return e.forEach(function(t){var e=new rl(t,0),i=new rl(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),_u.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;lo.isDocumentKey(i)||(i=i.child(""));var o=new rl(new lo(i),0),s=new Xs(Ui);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),_u.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Vi(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return _u.forEach(e.mutations,function(i){var o=new rl(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new rl(e,0),r=this.rs.firstAfterOrEqual(n);return _u.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return _u.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ol=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ws(lo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return _u.resolve(n?n.document.clone():So.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ta();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():So.newInvalidDocument(t))}),_u.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ta(),i=new lo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||us(e,u)&&(r=r.insert(u.key,u.clone()))}return _u.resolve(r)},t.prototype.fs=function(t,e){return _u.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new sl(this)},t.prototype.getSize=function(t){return _u.resolve(this.size)},t}(),sl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Oi.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),_u.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ec),al=function(){function t(t){this.persistence=t,this.ds=new _c(function(t){return ko(t)},Do),this.lastRemoteSnapshotVersion=zi.min(),this.highestTargetId=0,this.ws=0,this._s=new nl,this.targetCount=0,this.ys=cc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),_u.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return _u.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return _u.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),_u.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),_u.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new cc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,_u.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),_u.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,_u.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),_u.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return _u.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return _u.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),_u.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),_u.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),_u.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return _u.resolve(n)},t.prototype.containsKey=function(t,e){return _u.resolve(this._s.containsKey(e))},t}(),ul=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ci(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new al(this),this.Ut=new $u,this.Ue=function(t,e){return new ol(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Vu(e),this.Qe=new el(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new il(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Di("MemoryPersistence","Starting transaction:",t);var i=new cl(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return _u.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),cl=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Oi.c)(e,t),e}(bu),ll=function(){function t(t){this.persistence=t,this.As=new nl,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Pi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),_u.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),_u.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),_u.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _u.forEach(this.vs,function(r){var i=lo.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return _u.or([function(){return _u.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),hl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function fl(t,e){return"firestore_clients_"+t+"_"+e}function dl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function pl(t,e){return"firestore_targets_"+t+"_"+e}hl.UNAUTHENTICATED=new hl(null),hl.GOOGLE_CREDENTIALS=new hl("google-credentials-uid"),hl.FIRST_PARTY=new hl("first-party-uid");var yl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ai(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ni("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),gl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ai(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ni("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ml=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ua(),s=0;i&&s<r.activeTargetIds.length;++s)i=co(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ni("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),vl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ni("SharedClientState","Failed to parse online state: "+e),null)},t}(),bl=function(){function t(){this.activeTargetIds=ua()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),wl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ws(Ui),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=fl(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new bl),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Oi.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(fl(this.persistenceKey,r)))&&(o=ml.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(pl(this.persistenceKey,t));if(n){var r=gl.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(pl(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Di("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Di("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Di("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Di("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Ni("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Oi.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Oi.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ci.o;if(null!=t)try{var n=JSON.parse(t);Vi("number"==typeof n),e=n}catch(t){Ni("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ci.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new yl(this.currentUser,t,e,n),i=dl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=dl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=pl(this.persistenceKey,t),i=new gl(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ml.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return yl.Vs(new hl(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return gl.Vs(r,e)},t.prototype.js=function(t){return vl.Vs(t)},t.prototype.ii=function(t){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ai(t.batchId,t.state,t.error)]:(Di("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ui(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ua();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),_l=function(){function t(){this.li=new bl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new bl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),El=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Il=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Di("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Di("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Tl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ol=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Cl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Oi.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Ti;s.listenOnce(_i.COMPLETE,function(){try{switch(s.getLastErrorCode()){case wi.NO_ERROR:var e=s.getResponseJson();Di("Connection","XHR received:",JSON.stringify(e)),i(e);break;case wi.TIMEOUT:Di("Connection",'RPC "'+t+'" timed out'),o(new Ai(Si.DEADLINE_EXCEEDED,"Request time out"));break;case wi.HTTP_ERROR:var n=s.getStatus();if(Di("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Si).indexOf(e)>=0?e:Si.UNKNOWN}(r.status);o(new Ai(a,r.message))}else o(new Ai(Si.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ai(Si.UNAVAILABLE,"Connection failed."));break;default:Pi()}}finally{Di("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new yi,i=vn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(_t.n)()||Object(_t.p)()||Object(_t.l)()||Object(_t.m)()||Object(_t.q)()||Object(_t.k)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Di("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Ol({Ei:function(t){c?Di("Connection","Not sending because WebChannel is closed:",t):(u||(Di("Connection","Opening WebChannel transport."),a.open(),u=!0),Di("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ii.EventType.OPEN,function(){c||Di("Connection","WebChannel transport opened.")}),h(a,Ii.EventType.CLOSE,function(){c||(c=!0,Di("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ii.EventType.ERROR,function(t){c||(c=!0,ji("Connection","WebChannel transport errored:",t),l.Vi(new Ai(Si.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ii.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Vi(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Di("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=qs[t];if(void 0!==e)return Qs(e)}(i),s=r.message;void 0===o&&(o=Si.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Ai(o,s)),a.close()}else Di("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ei.STAT_EVENT,function(t){10===t.stat?Di("Connection","Detected buffering proxy"):11===t.stat&&Di("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Di("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Di("RestConnection","Received: ",t),t},function(e){throw ji("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Tl[t]},t}());function Sl(){return"undefined"!=typeof window?window:null}function Al(){return"undefined"!=typeof document?document:null}function xl(t){return new wa(t,!0)}var kl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Di("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Dl=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new kl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ar(),this.stream.send(t)},t.prototype.rr=function(){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ar=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(n){switch(n.label){case 0:return this.ar(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Si.RESOURCE_EXHAUSTED?(Ni(e.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Si.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ur(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ur=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Ai(Si.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Oi.b)(t,void 0,void 0,function(){return Object(Oi.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Di("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Di("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Nl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Oi.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Pi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Vi(void 0===e||"string"==typeof e),Ji.fromBase64String(e||"")):(Vi(void 0===e||e instanceof Uint8Array),Ji.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Si.UNKNOWN:Qs(t.code);return new Ai(e,t.message||"")}(a);n=new da(r,i,o,s||null)}else if("documentChange"in e){i=Aa(t,(r=e.documentChange).document.name),o=Ta(r.document.updateTime);var a=new Oo({mapValue:{fields:r.document.fields}}),u=(s=So.newFoundDocument(i,o,a),r.targetIds||[]);n=new ha(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Aa(t,(r=e.documentDelete).document),o=r.readTime?Ta(r.readTime):zi.min(),a=So.newNoDocument(i,o),n=new ha([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Aa(t,(r=e.documentRemove).document),n=new ha([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Pi();var c=e.filter;i=new Ks(r=c.count||0),n=new fa(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return zi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?zi.min():e.readTime?Ta(e.readTime):zi.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Da(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=No(r)?{documents:Fa(t,r)}:{query:Ma(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ea(t,e.resumeToken):e.snapshotVersion.compareTo(zi.min())>0&&(n.readTime=_a(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Pi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Da(this.R),e.removeTarget=t,this.cr(e)},e}(Dl),jl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Oi.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ur=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Vi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Vi(void 0!==e),t.map(function(t){return function(t,e){var n=Ta(t.updateTime?t.updateTime:e);return n.isEqual(zi.min())&&(n=Ta(e)),new Ss(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ta(t.commitTime);return this.listener.Tr(n,e)}return Vi(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Da(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Pa(e.R,t)})};this.cr(n)},e}(Dl),Rl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Oi.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ai(Si.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Si.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ai(Si.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Si.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ai(Si.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Pl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ni(e),this.Vr=!1):Di("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Vl=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Oi.b)(o,void 0,void 0,function(){return Object(Oi.d)(this,function(t){switch(t.label){case 0:return Kl(this)?(Di("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Oi.b)(this,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return(e=Fi(t)).$r.add(4),[4,Ml(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Fl(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Pl(n,r)};function Fl(t){return Object(Oi.b)(this,void 0,void 0,function(){var e,n;return Object(Oi.d)(this,function(r){switch(r.label){case 0:if(!Kl(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ml(t){return Object(Oi.b)(this,void 0,void 0,function(){var e,n;return Object(Oi.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ll(t,e){var n=Fi(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),zl(n)?Hl(n):sh(n).er()&&ql(n,e))}function Ul(t,e){var n=Fi(t),r=sh(n);n.Or.delete(e),r.er()&&Bl(n,e),0===n.Or.size&&(r.er()?r.ir():Kl(n)&&n.Br.set("Unknown"))}function ql(t,e){t.qr.U(e.targetId),sh(t).mr(e)}function Bl(t,e){t.qr.U(e),sh(t).yr(e)}function Hl(t){t.qr=new ya({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),sh(t).start(),t.Br.Sr()}function zl(t){return Kl(t)&&!sh(t).tr()&&t.Or.size>0}function Kl(t){return 0===Fi(t).$r.size}function Gl(t){t.qr=void 0}function Ql(t){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(e){return t.Or.forEach(function(e,n){ql(t,e)}),[2]})})}function Wl(t,e){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(n){return Gl(t),zl(t)?(t.Br.Nr(e),Hl(t)):t.Br.set("Unknown"),[2]})})}function Yl(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i,o;return Object(Oi.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof da&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Oi.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Di("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,$l(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ha?t.qr.X(e):e instanceof fa?t.qr.rt(e):t.qr.et(e),n.isEqual(zi.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Hc(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.at(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Ji.EMPTY_BYTE_STRING,n.snapshotVersion)),Bl(t,e);var r=new Pu(n.target,e,1,n.sequenceNumber);ql(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Di("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,$l(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function $l(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r=this;return Object(Oi.d)(this,function(i){switch(i.label){case 0:if(!Cu(e))throw e;return t.$r.add(1),[4,Ml(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Hc(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Oi.b)(r,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return Di("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Fl(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Xl(t,e){return e().catch(function(n){return $l(t,n,e)})}function Zl(t){return Object(Oi.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Oi.d)(this,function(s){switch(s.label){case 0:e=Fi(t),n=ah(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Kl(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Gc(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=ah(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,$l(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Jl(e)&&th(e),[2]}})})}function Jl(t){return Kl(t)&&!ah(t).tr()&&t.kr.length>0}function th(t){ah(t).start()}function eh(t){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(e){return ah(t).Ar(),[2]})})}function nh(t){return Object(Oi.b)(this,void 0,void 0,function(){var e,n,r;return Object(Oi.d)(this,function(i){for(e=ah(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function rh(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Ru.from(r,e,n),[4,Xl(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Zl(t)];case 2:return o.sent(),[2]}})})}function ih(t,e){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(n){switch(n.label){case 0:return e&&ah(t).pr?[4,function(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return Gs(r=e.code)&&r!==Si.ABORTED?(n=t.kr.shift(),ah(t).sr(),[4,Xl(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Zl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Jl(t)&&th(t),[2]}})})}function oh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return n=Fi(t),e?(n.$r.delete(2),[4,Fl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Ml(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function sh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Fi(t);return r.br(),new Nl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ql.bind(null,t),Ri:Wl.bind(null,t),_r:Yl.bind(null,t)}),t.Mr.push(function(n){return Object(Oi.b)(e,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),zl(t)?Hl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Gl(t),e.label=3;case 3:return[2]}})})})),t.Ur}function ah(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Fi(t);return r.br(),new jl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:eh.bind(null,t),Ri:ih.bind(null,t),Ir:nh.bind(null,t),Tr:rh.bind(null,t)}),t.Mr.push(function(n){return Object(Oi.b)(e,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Zl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Di("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var uh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new wu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ai(Si.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ch(t,e){if(Ni("AsyncQueue",e+": "+t),Cu(t))return new Ai(Si.UNAVAILABLE,e+": "+t);throw t}var lh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||lo.comparator(e.key,n.key)}:function(t,e){return lo.comparator(t.key,e.key)},this.keyedMap=na(),this.sortedSet=new Ws(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),hh=function(){function t(){this.Kr=new Ws(lo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Pi():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),fh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,lh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&os(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),dh=function(){this.Wr=void 0,this.listeners=[]},ph=function(){this.queries=new _c(function(t){return ss(t)},os),this.onlineState="Unknown",this.Gr=new Set};function yh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Oi.d)(this,function(c){switch(c.label){case 0:if(n=Fi(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new dh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ch(a,"Initialization of query '"+as(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&bh(n),[2]}})})}function gh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Oi.d)(this,function(a){return n=Fi(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function mh(t,e){for(var n=Fi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&bh(n)}function vh(t,e,n){var r=Fi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function bh(t){t.Gr.forEach(function(t){t.next()})}var wh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new fh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=fh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),_h=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Eh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Aa(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ra(this.R,t.document,!1):So.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Ta(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Eh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||sa()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return[4,Jc(this.localStore,new Eh(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,tl(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Pc(Object.assign({},this.progress),t))]}})})}}();var Ih=function(t){this.key=t},Th=function(t){this.key=t},Oh=function(){function t(t,e){this.query=t,this.ao=e,this.uo=null,this.current=!1,this.ho=sa(),this.mutatedKeys=sa(),this.lo=cs(t),this.fo=new lh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.ao},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new hh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Xo(this.query)&&i.size===this.query.limit?i.last():null,c=Zo(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=us(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Xo(this.query)||Zo(this.query))for(;s.size>this.query.limit;){var l=Xo(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.uo;return this.uo=a,0!==o.length||u?{snapshot:new fh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new hh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.ao.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.ao=e.ao.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.ao=e.ao.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=sa(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Th(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Ih(t))}),n},t.prototype.Ao=function(t){this.ao=t.Bn,this.ho=sa();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return fh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.uo)},t}(),Ch=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Sh=function(t){this.key=t,this.bo=!1},Ah=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new _c(function(t){return ss(t)},os),this.Vo=new Map,this.So=new Set,this.Do=new Ws(lo.comparator),this.Co=new Map,this.No=new nl,this.xo={},this.Fo=new Map,this.ko=cc.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function xh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Oi.d)(this,function(a){switch(a.label){case 0:return n=of(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Qc(n.localStore,rs(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,kh(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Ll(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function kh(t,e,n,r){return Object(Oi.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Oi.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Oi.b)(this,void 0,void 0,function(){var i,o,s;return Object(Oi.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Yc(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Hh(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Yc(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Oh(e,i.Bn),s=o._o(i.documents),a=la.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Hh(t,n,u.To),c=new Ch(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Dh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return n=Fi(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!os(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Wc(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Ul(n.remoteStore,r.targetId),qh(n,r.targetId)}).catch(pc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return qh(n,r.targetId),[4,Wc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Nh(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Oi.d)(this,function(a){switch(a.label){case 0:r=sf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Fi(t),i=Hi.now(),o=e.reduce(function(t,e){return t.add(e.key)},sa());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=js(c,n.get(c.key));null!=l&&s.push(new Fs(c.key,l,Co(l.toProto().mapValue),As.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ws(Ui)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Gh(r,i.changes)];case 3:return a.sent(),[4,Zl(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ch(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function jh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r;return Object(Oi.d)(this,function(i){switch(i.label){case 0:n=Fi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Vi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Vi(r.bo):t.removedDocuments.size>0&&(Vi(r.bo),r.bo=!1))}),[4,Gh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,pc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Rh(t,e,n){var r=Fi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Fi(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&bh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ph(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Oi.d)(this,function(c){switch(c.label){case 0:return(r=Fi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ws(lo.comparator)).insert(o,So.newNoDocument(o,zi.min())),a=sa().add(o),u=new ca(zi.min(),new Map,new Xs(Ui),s,a),[4,jh(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Kh(r),[3,4];case 2:return[4,Wc(r.localStore,e,!1).then(function(){return qh(r,e,n)}).catch(pc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Vh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:n=Fi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Bc(n.localStore,e)];case 2:return i=o.sent(),Uh(n,r,null),Lh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Gh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,pc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Fh(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:r=Fi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Fi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Vi(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Uh(r,e,n),Lh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Gh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,pc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Mh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Oi.d)(this,function(a){switch(a.label){case 0:Kl((n=Fi(t)).remoteStore)||Di("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Fi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=ch(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Lh(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Uh(t,e,n){var r=Fi(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function qh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Bh(t,e)})}function Bh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ul(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Kh(t))}function Hh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Ih?(t.No.addReference(o.key,e),zh(t,o)):o instanceof Th?(Di("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Bh(t,o.key)):Pi()}}function zh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Di("SyncEngine","New document in limbo: "+n),t.So.add(r),Kh(t))}function Kh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new lo(Yi.fromString(e)),r=t.ko.next();t.Co.set(r,new Sh(n)),t.Do=t.Do.insert(n,r),Ll(t.remoteStore,new Pu(rs($o(n.path)),r,2,Ci.o))}}function Gh(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Oi.d)(this,function(a){switch(a.label){case 0:return r=Fi(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Fc.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Oi.d)(this,function(l){switch(l.label){case 0:n=Fi(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return _u.forEach(e,function(e){return _u.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return _u.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Cu(r=l.sent()))throw r;return Di("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Qh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return(n=Fi(t)).currentUser.isEqual(e)?[3,3]:(Di("SyncEngine","User change. New user:",e.toKey()),[4,qc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Ai(Si.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Gh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Wh(t,e){var n=Fi(t),r=n.Co.get(e);if(r&&r.bo)return sa().add(r.key);var i=sa(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Yh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return[4,Yc((n=Fi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Hh(n,e.targetId,i.To),i)]}})})}function $h(t){return Object(Oi.b)(this,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){return[2,Xc((e=Fi(t)).localStore).then(function(t){return Gh(e,t)})]})})}function Xh(t,e,n,r){return Object(Oi.b)(this,void 0,void 0,function(){var i,o;return Object(Oi.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Fi(t),r=Fi(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):_u.resolve(null)})})}((i=Fi(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Zl(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Uh(i,e,r||null),Lh(i,e),function(t,e){Fi(Fi(t)._n).Gt(e)}(i.localStore,e)):Pi(),s.label=4;case 4:return[4,Gh(i,o)];case 5:return s.sent(),[3,7];case 6:Di("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Zh(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Oi.d)(this,function(c){switch(c.label){case 0:return of(n=Fi(t)),sf(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Jh(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,oh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Ll(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return qh(n,e),Wc(n.localStore,e,!0)}),Ul(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Jh(n,a)];case 5:return c.sent(),function(t){var e=Fi(t);e.Co.forEach(function(t,n){Ul(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Ws(lo.comparator)}(n),n.Oo=!1,[4,oh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Jh(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Oi.d)(this,function(y){switch(y.label){case 0:n=Fi(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Qc(n.localStore,rs(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Yh(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,$c(n.localStore,a)];case 8:return p=y.sent(),[4,Qc(n.localStore,p)];case 9:return u=y.sent(),[4,kh(n,tf(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function tf(t){return Yo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ef(t){var e=Fi(t);return Fi(Fi(e.localStore).persistence).fn()}function nf(t,e,n,r){return Object(Oi.b)(this,void 0,void 0,function(){var i,o,s;return Object(Oi.d)(this,function(a){switch(a.label){case 0:return(i=Fi(t)).Oo?(Di("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Xc(i.localStore)];case 3:return o=a.sent(),s=ca.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Gh(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Wc(i.localStore,e,!0)];case 6:return a.sent(),qh(i,e,r),[3,8];case 7:Pi(),a.label=8;case 8:return[2]}})})}function rf(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Oi.d)(this,function(f){switch(f.label){case 0:if(!(r=of(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Di("SyncEngine","Adding an already active target "+s),[3,5]):[4,$c(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Qc(r.localStore,a)];case 3:return u=f.sent(),[4,kh(r,tf(a),u.targetId,!1)];case 4:f.sent(),Ll(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Wc(r.localStore,t,!1).then(function(){Ul(r.remoteStore,t),qh(r,t)}).catch(pc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function of(t){var e=Fi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ph.bind(null,e),e.vo._r=mh.bind(null,e.eventManager),e.vo.Mo=vh.bind(null,e.eventManager),e}function sf(t){var e=Fi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fh.bind(null,e),e}var af=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return this.R=xl(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Uc(this.persistence,new Mc,t.initialUser,this.R)},t.prototype.qo=function(t){return new ul(ll.bs,this.R)},t.prototype.Bo=function(t){return new _l},t.prototype.terminate=function(){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),uf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Oi.c)(e,t),e.prototype.initialize=function(e){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Zc(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,sf(this.Ko.syncEngine)];case 4:return n.sent(),[4,Zl(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Uc(this.persistence,new Mc,t.initialUser,this.R)},e.prototype.Uo=function(t){return new mc(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Rc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ec.withCacheSize(this.cacheSizeBytes):ec.DEFAULT;return new Dc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Sl(),Al(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new _l},e}(af),cf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Oi.c)(e,t),e.prototype.initialize=function(e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r=this;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof wl?(this.sharedClientState.syncEngine={ai:Xh.bind(null,n),ui:nf.bind(null,n),hi:rf.bind(null,n),fn:ef.bind(null,n),ci:$h.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Oi.b)(r,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return[4,Zh(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Sl();if(!wl.yt(e))throw new Ai(Si.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Rc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new wl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(uf),lf=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n=this;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Rh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Qh.bind(null,this.syncEngine),[4,oh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new ph},t.prototype.createDatastore=function(t){var e=xl(t.databaseInfo.databaseId),n=new Cl(t.databaseInfo);return function(t,e,n){return new Rl(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Rh(s.syncEngine,t,0)},o=Il.yt()?new Il:new El,new Vl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Ah(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Oi.b)(this,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return e=Fi(t),Di("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Ml(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),hf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),ff=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new wu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new _h(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t,e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Oi.b)(this,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t,e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Oi.b)(this,void 0,void 0,function(){var e,n=this;return Object(Oi.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ai(Si.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Oi.d)(this,function(u){switch(u.label){case 0:return n=Fi(t),r=Da(n.R)+"/documents",i={documents:e.map(function(t){return Sa(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Vi(!!e.found);var n=Aa(t,e.found.name),r=Ta(e.found.updateTime),i=new Oo({mapValue:{fields:e.found.fields}});return So.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Vi(!!e.missing),Vi(!!e.readTime);var n=Aa(t,e.missing),r=Ta(e.readTime);return So.newNoDocument(n,r)}(t,e):Pi()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Vi(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Hs(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t,e=this;return Object(Oi.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=lo.fromPath(n);e.mutations.push(new zs(r,e.precondition(r)))}),[4,function(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return n=Fi(t),r=Da(n.R)+"/documents",i={writes:e.map(function(t){return Pa(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Pi();e=zi.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ai(Si.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?As.updateTime(e):As.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(zi.min()))throw new Ai(Si.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return As.updateTime(e)}return As.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),df=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new kl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Oi.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Oi.d)(this,function(r){return t=new ff(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ao(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Gs(e)}return!1},t}(),pf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=hl.UNAUTHENTICATED,this.clientId=Li.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return Object(Oi.b)(r,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return Di("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ai(Si.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new wu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Oi.b)(t,void 0,void 0,function(){var t,n;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ch(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function yf(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Di("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return Object(Oi.b)(i,void 0,void 0,function(){return Object(Oi.d)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,qc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function gf(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,mf(t)];case 1:return n=i.sent(),Di("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return Object(Oi.b)(this,void 0,void 0,function(){var n,r;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return(n=Fi(t)).asyncQueue.verifyOperationInProgress(),Di("RemoteStore","RemoteStore received new credentials"),r=Kl(n),n.$r.add(3),[4,Ml(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Fl(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function mf(t){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Di("FirestoreClient","Using default OfflineComponentProvider"),[4,yf(t,new af)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function vf(t){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Di("FirestoreClient","Using default OnlineComponentProvider"),[4,gf(t,new lf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function bf(t){return mf(t).then(function(t){return t.persistence})}function wf(t){return mf(t).then(function(t){return t.localStore})}function _f(t){return vf(t).then(function(t){return t.remoteStore})}function Ef(t){return vf(t).then(function(t){return t.syncEngine})}function If(t){return Object(Oi.b)(this,void 0,void 0,function(){var e,n;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return[4,vf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=xh.bind(null,e.syncEngine),n.onUnlisten=Dh.bind(null,e.syncEngine),n)]}})})}function Tf(t,e,n){var r=this;void 0===n&&(n={});var i=new wu;return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(r,void 0,void 0,function(){var r;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hf({next:function(o){e.enqueueAndForget(function(){return gh(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ai(Si.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ai(Si.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new wh($o(n.path),o,{includeMetadataChanges:!0,so:!0});return yh(t,s)},[4,If(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Of(t,e,n){var r=this;void 0===n&&(n={});var i=new wu;return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(r,void 0,void 0,function(){var r;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hf({next:function(n){e.enqueueAndForget(function(){return gh(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ai(Si.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new wh(n,o,{includeMetadataChanges:!0,so:!0});return yh(t,s)},[4,If(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Cf=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Sf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Af=new Map,xf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},kf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(hl.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Df=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Nf=function(){function t(t){var e=this;this.currentUser=hl.UNAUTHENTICATED,this.oc=new wu,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.ac&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Di("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.ac&&(Di("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)}))}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Di("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Vi("string"==typeof n.accessToken),new xf(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.ac=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return Vi(null===t||"string"==typeof t),new hl(t)},t.prototype.lc=function(){var t=this;this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable(function(){return Object(Oi.b)(t,void 0,void 0,function(){return Object(Oi.d)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.ac=!0,[2]}})})}))},t}(),jf=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=hl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),Rf=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new jf(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(hl.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Pf(t,e,n){if(!n)throw new Ai(Si.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Vf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ai(Si.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ff(t,e,n,r){if(!0===e&&!0===r)throw new Ai(Si.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Mf(t){if(!lo.isDocumentKey(t))throw new Ai(Si.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Lf(t){if(lo.isDocumentKey(t))throw new Ai(Si.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Uf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Pi()}function qf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ai(Si.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Uf(t);throw new Ai(Si.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Bf(t,e){if(e<=0)throw new Ai(Si.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Hf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ai(Si.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ai(Si.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ff("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),zf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hf({}),this._settingsFrozen=!1,t instanceof Sf?(this._databaseId=t,this._credentials=new kf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ai(Si.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sf(t.options.projectId)}(t),this._credentials=new Nf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ai(Si.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ai(Si.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new kf;switch(t.type){case"gapi":var e=t.client;return Vi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Rf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ai(Si.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Af.get(this))&&(Di("ComponentProvider","Removing Datastore"),Af.delete(this),t.terminate()),Promise.resolve();var t},t}(),Kf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Qf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Gf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,$o(r))||this)._path=r,i.type="collection",i}return Object(Oi.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Kf(this.firestore,null,new lo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Gf);function Wf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(_t.h)(t),Pf("collection","path",e),t instanceof zf)return Lf(n=Yi.fromString.apply(Yi,Object(Oi.f)([e],r))),new Qf(t,null,n);if(!(t instanceof Kf||t instanceof Qf))throw new Ai(Si.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Lf(n=Yi.fromString.apply(Yi,Object(Oi.f)([t.path],r)).child(Yi.fromString(e))),new Qf(t.firestore,null,n)}function Yf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(_t.h)(t),1===arguments.length&&(e=Li.u()),Pf("doc","path",e),t instanceof zf)return Mf(n=Yi.fromString.apply(Yi,Object(Oi.f)([e],r))),new Kf(t,null,new lo(n));if(!(t instanceof Kf||t instanceof Qf))throw new Ai(Si.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Mf(n=t._path.child(Yi.fromString.apply(Yi,Object(Oi.f)([e],r)))),new Kf(t.firestore,t instanceof Qf?t.converter:null,new lo(n))}function $f(t,e){return t=Object(_t.h)(t),e=Object(_t.h)(e),(t instanceof Kf||t instanceof Qf)&&(e instanceof Kf||e instanceof Qf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Xf(t,e){return t=Object(_t.h)(t),e=Object(_t.h)(e),t instanceof Gf&&e instanceof Gf&&t.firestore===e.firestore&&os(t._query,e._query)&&t.converter===e.converter}var Zf=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new kl(this,"async_queue_retry"),this.Ac=function(){var e=Al();e&&Di("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Al();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=Al();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise(function(t){}):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.mc.push(t),e.vc()})},t.prototype.vc=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t,e=this;return Object(Oi.d)(this,function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!Cu(t=n.sent()))throw t;return Di("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji(function(){return e.vc()}),n.label=5;case 5:return[2]}})})},t.prototype.bc=function(t){var e=this,n=this._c.then(function(){return e.Tc=!0,t().catch(function(t){throw e.Ec=t,e.Tc=!1,Ni("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Tc=!1,t})});return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=uh.createAndSchedule(this,t,e,n,function(t){return r.Pc(t)});return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&Pi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return Object(Oi.b)(this,void 0,void 0,function(){var t;return Object(Oi.d)(this,function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then(function(){e.gc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()})},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function Jf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new wu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var td=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Zf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Oi.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||nd(this),this._firestoreClient.terminate()},e}(zf);function ed(t){return t._firestoreClient||nd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Cf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new pf(t._credentials,t._queue,r)}function rd(t,e,n){var r=this,i=new wu;return t.asyncQueue.enqueue(function(){return Object(Oi.b)(r,void 0,void 0,function(){var r;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,yf(t,n)];case 1:return o.sent(),[4,gf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Si.FAILED_PRECONDITION||t.code===Si.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function id(t){if(t._initialized||t._terminated)throw new Ai(Si.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var od=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ai(Si.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xi(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),sd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Ji.fromBase64String(e))}catch(e){throw new Ai(Si.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Ji.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ad=function(t){this._methodName=t},ud=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ai(Si.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ai(Si.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ui(this._lat,t._lat)||Ui(this._long,t._long)},t}(),cd=/^__.*__$/,ld=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Fs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Vs(t,this.data,e,this.fieldTransforms)},t}(),hd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Fs(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function fd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pi()}}var dd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,Oc:!1});return r.$c(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,Oc:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,Oc:!0})},t.prototype.Bc=function(t){return jd(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(fd(this.xc)&&cd.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),pd=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||xl(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new dd({xc:t,methodName:e,Uc:n,path:Xi.emptyPath(),Oc:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function yd(t){var e=t._freezeSettings(),n=xl(t._databaseId);return new pd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);xd("Data must be an object, but it was:",s,r);var a,u,c=Sd(r,s);if(o.merge)a=new Zi(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=kd(e,f[h],n);if(!s.contains(d))throw new Ai(Si.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Rd(l,d)||l.push(d)}a=new Zi(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new ld(new Oo(c),a,u)}var md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Oi.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw t.Bc(1===t.xc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ad);function vd(t,e,n){return new dd({xc:3,Uc:e.settings.Uc,methodName:t._methodName,Oc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var bd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Oi.c)(e,t),e.prototype._toFieldTransform=function(t){return new Cs(t.path,new vs)},e.prototype.isEqual=function(t){return t instanceof e},e}(ad),wd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(Oi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=vd(this,t,!0),n=this.Kc.map(function(t){return Cd(t,e)}),r=new bs(n);return new Cs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ad),_d=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(Oi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=vd(this,t,!0),n=this.Kc.map(function(t){return Cd(t,e)}),r=new _s(n);return new Cs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ad),Ed=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Oi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Is(t.R,ds(t.R,this.jc));return new Cs(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ad);function Id(t,e,n,r){var i=t.Qc(1,e,n);xd("Data must be an object, but it was:",i,r);var o=[],s=Oo.empty();Gi(r,function(t,r){var a=Nd(e,t,n);r=Object(_t.h)(r);var u=i.Mc(a);if(r instanceof md)o.push(a);else{var c=Cd(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Zi(o);return new hd(s,a,i.fieldTransforms)}function Td(t,e,n,r,i,o){var s=t.Qc(1,e,n),a=[kd(e,r,n)],u=[i];if(o.length%2!=0)throw new Ai(Si.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(kd(e,o[c])),u.push(o[c+1]);for(var l=[],h=Oo.empty(),f=a.length-1;f>=0;--f)if(!Rd(l,a[f])){var d=a[f],p=u[f];p=Object(_t.h)(p);var y=s.Mc(d);if(p instanceof md)l.push(d);else{var g=Cd(p,y);null!=g&&(l.push(d),h.set(d,g))}}var m=new Zi(l);return new hd(h,m,s.fieldTransforms)}function Od(t,e,n,r){return void 0===r&&(r=!1),Cd(n,t.Qc(r?4:3,e))}function Cd(t,e){if(Ad(t=Object(_t.h)(t)))return xd("Unsupported field value:",e,t),Sd(t,e);if(t instanceof ad)return function(t,e){if(!fd(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Cd(o[i],e.Lc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(_t.h)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ds(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Hi.fromDate(t);return{timestampValue:_a(e.R,n)}}if(t instanceof Hi)return n=new Hi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:_a(e.R,n)};if(t instanceof ud)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof sd)return{bytesValue:Ea(e.R,t._byteString)};if(t instanceof Kf){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Oa(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+Uf(t))}(t,e)}function Sd(t,e){var n={};return Qi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(t,function(t,r){var i=Cd(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Ad(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Hi||t instanceof ud||t instanceof sd||t instanceof Kf||t instanceof ad)}function xd(t,e,n){if(!Ad(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Uf(n);throw e.Bc("an object"===r?t+" a custom object":t+" "+r)}}function kd(t,e,n){if((e=Object(_t.h)(e))instanceof od)return e._internalPath;if("string"==typeof e)return Nd(t,e);throw jd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Dd=new RegExp("[~\\*/\\[\\]]");function Nd(t,e,n){if(e.search(Dd)>=0)throw jd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(od.bind.apply(od,Object(Oi.f)([void 0],e.split(".")))))._internalPath}catch(r){throw jd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function jd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ai(Si.INVALID_ARGUMENT,(a+=". ")+t+u)}function Rd(t,e){return t.some(function(t){return t.isEqual(e)})}var Pd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Kf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Vd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Fd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Oi.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Pd);function Fd(t,e){return"string"==typeof e?Nd(t,e):e instanceof od?e._internalPath:e._delegate._internalPath}var Md=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ld=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Oi.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Fd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Pd),Ud=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Oi.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Ld),qd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Md(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Ud(n._firestore,n._userDataWriter,r.key,r,new Md(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ai(Si.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Ud(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Md(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Ud(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Md(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Bd(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Bd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pi()}}function Hd(t,e){return t instanceof Ld&&e instanceof Ld?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qd&&e instanceof qd&&t._firestore===e._firestore&&Xf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function zd(t){if(Zo(t)&&0===t.explicitOrderBy.length)throw new Ai(Si.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kd=function(){};function Gd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Qd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return Object(Oi.c)(e,t),e.prototype._apply=function(t){var e=yd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ai(Si.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){tp(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Jd(r,t,l[c]));a={arrayValue:{values:u}}}else a=Jd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||tp(s,o),a=Od(n,"where",s,"in"===o||"not-in"===o);var h=jo.create(i,o,a);return function(t,e){if(e.g()){var n=ts(t);if(null!==n&&!n.isEqual(e.field))throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Jo(t);null!==r&&ep(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ai(Si.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new Gf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Kd),Wd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return Object(Oi.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new zo(e,n);return function(t,e){if(null===Jo(t)){var n=ts(t);null!==n&&ep(0,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new Gf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Wo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Kd),Yd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(Oi.c)(e,t),e.prototype._apply=function(t){return new Gf(t.firestore,t.converter,is(t._query,this.Jc,this.Yc))},e}(Kd),$d=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(Oi.c)(e,t),e.prototype._apply=function(t){var e=Zd(t,this.type,this.Xc,this.Zc);return new Gf(t.firestore,t.converter,function(t,e){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Kd),Xd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(Oi.c)(e,t),e.prototype._apply=function(t){var e=Zd(t,this.type,this.Xc,this.Zc);return new Gf(t.firestore,t.converter,function(t,e){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Kd);function Zd(t,e,n,r){if(n[0]=Object(_t.h)(n[0]),n[0]instanceof Pd)return function(t,e,n,r,i){if(!r)throw new Ai(Si.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ns(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(bo(e,r.key));else{var c=r.data.field(u.field);if(io(c))throw new Ai(Si.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Bo(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=yd(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ai(Si.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!es(t)&&-1!==c.indexOf("/"))throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Yi.fromString(c));if(!lo.isDocumentKey(l))throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new lo(l);a.push(bo(e,h))}else{var f=Od(n,r,c);a.push(f)}}return new Bo(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Jd(t,e,n){if("string"==typeof(n=Object(_t.h)(n))){if(""===n)throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!es(e)&&-1!==n.indexOf("/"))throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yi.fromString(n));if(!lo.isDocumentKey(r))throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return bo(t,new lo(r))}if(n instanceof Kf)return bo(t,n._key);throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Uf(n)+".")}function tp(t,e){if(!Array.isArray(t)||0===t.length)throw new Ai(Si.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ai(Si.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ep(t,e,n){if(!n.isEqual(e))throw new Ai(Si.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var np=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ho(t)){case 0:return null;case 1:return t.booleanValue;case 2:return no(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ro(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Pi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Gi(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new ud(no(t.latitude),no(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=oo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(so(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=eo(t);return new Hi(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Yi.fromString(t);Vi($a(n));var r=new Sf(n.get(1),n.get(3)),i=new lo(n.popFirst(5));return r.isEqual(e)||Ni("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function rp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ip=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Oi.c)(e,t),e.prototype.convertBytes=function(t){return new sd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kf(this.firestore,null,e)},e}(np),op=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=yd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=sp(t,this._firestore),i=rp(r.converter,e,n),o=gd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,As.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=sp(t,this._firestore);return o="string"==typeof(e=Object(_t.h)(e))||e instanceof od?Td(this._dataReader,"WriteBatch.update",s._key,e,n,r):Id(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,As.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=sp(t,this._firestore);return this._mutations=this._mutations.concat(new Hs(e._key,As.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ai(Si.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function sp(t,e){if((t=Object(_t.h)(t)).firestore!==e)throw new Ai(Si.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ap=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Oi.c)(e,t),e.prototype.convertBytes=function(t){return new sd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kf(this.firestore,null,e)},e}(np);function up(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=qf(t,Kf);var o=qf(t.firestore,td),s=yd(o);return lp(o,[("string"==typeof(e=Object(_t.h)(e))||e instanceof od?Td(s,"updateDoc",t._key,e,n,r):Id(s,"updateDoc",t._key,e)).toMutation(t._key,As.exists(!0))])}function cp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(_t.h)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Jf(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Jf(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Kf)c=qf(t.firestore,td),l=$o(t._key.path),u={next:function(e){i[a]&&i[a](hp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=qf(t,Gf);c=qf(d.firestore,td),l=d._query;var p=new ap(c);u={next:function(t){i[a]&&i[a](new qd(c,p,d,t))},error:i[a+1],complete:i[a+2]},zd(t._query)}return function(t,e,n,r){var i=this,o=new hf(r),s=new wh(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(i,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return e=yh,[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(i,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return e=gh,[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(ed(c),l,h,u)}function lp(t,e){return function(t,e){var n=this,r=new wu;return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(n,void 0,void 0,function(){var n;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return n=Nh,[4,Ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ed(t),e)}function hp(t,e,n){var r=n.docs.get(e._key),i=new ap(t);return new Ld(t,i,e._key,r,new Md(n.hasPendingWrites,n.fromCache),e.converter)}var fp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Oi.c)(e,t),e.prototype.get=function(e){var n=this,r=sp(e,this._firestore),i=new ap(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Ld(n._firestore,i,r._key,t._document,new Md(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=yd(t)}return t.prototype.get=function(t){var e=this,n=sp(t,this._firestore),r=new ip(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Pi();var i=t[0];if(i.isFoundDocument())return new Pd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Pd(e._firestore,r,n._key,null,n.converter);throw Pi()})},t.prototype.set=function(t,e,n){var r=sp(t,this._firestore),i=rp(r.converter,e,n),o=gd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=sp(t,this._firestore);return o="string"==typeof(e=Object(_t.h)(e))||e instanceof od?Td(this._dataReader,"Transaction.update",s._key,e,n,r):Id(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=sp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function dp(){if("undefined"==typeof Uint8Array)throw new Ai(Si.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function pp(){if("undefined"==typeof atob)throw new Ai(Si.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var yp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return pp(),new t(sd.fromBase64String(e))},t.fromUint8Array=function(e){return dp(),new t(sd.fromUint8Array(e))},t.prototype.toBase64=function(){return pp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return dp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),gp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){id(t=qf(t,td));var n=ed(t),r=t._freezeSettings(),i=new lf;return rd(n,i,new uf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){id(t=qf(t,td));var e=ed(t),n=t._freezeSettings(),r=new lf;return rd(e,r,new cf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ai(Si.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new wu;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Oi.b)(e,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Oi.b)(this,void 0,void 0,function(){return Object(Oi.d)(this,function(e){switch(e.label){case 0:return Iu.yt()?[4,Iu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Rc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),mp=function(){function t(t,e,n){var r=this;this._delegate=e,this.ta=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Sf||(this.ea=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=qf(t,zf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&ji("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(_t.d)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ai(Si.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Df(new xf(o,new hl(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Oi.b)(e,void 0,void 0,function(){var e,n;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return[4,bf(t)];case 1:return e=r.sent(),[4,_f(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Fi(t);return e.$r.delete(0),Fl(e)}(n))]}})})})}(ed(qf(this._delegate,td)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Oi.b)(e,void 0,void 0,function(){var e,n;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return[4,bf(t)];case 1:return e=r.sent(),[4,_f(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Oi.b)(this,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return(e=Fi(t)).$r.add(0),[4,Ml(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(ed(qf(this._delegate,td)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ff("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.ta.enableMultiTabIndexedDbPersistence(this):this.ta.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.ta.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.ea&&(this.ea._removeServiceInstance("firestore"),this.ea._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new wu;return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(e,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(r){switch(r.label){case 0:return e=Mh,[4,Ef(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ed(qf(this._delegate,td)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new hf(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(n,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Fi(t).Gr.add(e),e.next()},[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(n,void 0,void 0,function(){var e;return Object(Oi.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Fi(t).Gr.delete(e)},[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ed(t=qf(t,td)),Jf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ea)throw new Ai(Si.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ea},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Dp(this,Wf(this._delegate,t))}catch(t){throw Ip(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ep(this,Yf(this._delegate,t))}catch(t){throw Ip(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Ap(this,function(t,e){if(t=qf(t,zf),Pf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ai(Si.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Gf(t,null,function(t){return new Wo(Yi.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Ip(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new wu;return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(n,void 0,void 0,function(){var n;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return vf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new df(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ed(t),function(n){return e(new fp(t,n))})}(this._delegate,function(n){return t(new bp(e,n))})},t.prototype.batch=function(){var t=this;return ed(this._delegate),new wp(new op(this._delegate,function(e){return lp(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Ai(Si.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ai(Si.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),vp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Oi.c)(e,t),e.prototype.convertBytes=function(t){return new yp(new sd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ep.na(e,this.firestore,null)},e}(np),bp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new vp(t)}return t.prototype.get=function(t){var e=this,n=Np(t);return this._delegate.get(n).then(function(t){return new Cp(e._firestore,new Ld(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Np(t);return n?(Vf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Np(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Oi.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Np(t);return this._delegate.delete(e),this},t}(),wp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Np(t);return n?(Vf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Np(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Oi.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Np(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),_p=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Ud(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Sp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.sa=function(e,n){var r=t.ia,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new vp(e),n),i.set(n,o)),o},t}();_p.ia=new WeakMap;var Ep=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vp(t)}return t.ra=function(e,n,r){if(e.length%2!=0)throw new Ai(Si.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Kf(n._delegate,r,new lo(e)))},t.na=function(e,n,r){return new t(n,new Kf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Dp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Dp(this.firestore,Wf(this._delegate,t))}catch(t){throw Ip(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(_t.h)(t))instanceof Kf&&$f(this._delegate,t)},t.prototype.set=function(t,e){e=Vf("DocumentReference.set",e);try{return function(t,e,n){t=qf(t,Kf);var r=qf(t.firestore,td),i=rp(t.converter,e,n);return lp(r,[gd(yd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,As.none())])}(this._delegate,t,e)}catch(t){throw Ip(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?up(this._delegate,t):up.apply(void 0,Object(Oi.f)([this._delegate,t,e],n))}catch(t){throw Ip(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return lp(qf((t=this._delegate).firestore,td),[new Hs(t._key,As.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Tp(e),i=Op(e,function(e){return new Cp(t.firestore,new Ld(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return cp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=qf(t,Kf);var e=qf(t.firestore,td),n=ed(e),r=new ap(e);return function(t,e){var n=this,r=new wu;return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(n,void 0,void 0,function(){var n;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i;return Object(Oi.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Fi(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ai(Si.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ch(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,wf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Ld(e,r,t._key,n,new Md(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=qf(t,Kf);var e=qf(t.firestore,td);return Tf(ed(e),t._key,{source:"server"}).then(function(n){return hp(e,t,n)})}(this._delegate):function(t){t=qf(t,Kf);var e=qf(t.firestore,td);return Tf(ed(e),t._key).then(function(n){return hp(e,t,n)})}(this._delegate)).then(function(t){return new Cp(e.firestore,new Ld(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?_p.sa(this.firestore,e):null))},t}();function Ip(t,e,n){return t.message=t.message.replace(e,n),t}function Tp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Jf(r))return r}return{}}function Op(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Jf(t[0])?t[0]:Jf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Cp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ep(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Hd(this._delegate,t._delegate)},t}(),Sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Oi.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Cp),Ap=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Gd(this._delegate,function(t,e,n){var r=e,i=Fd("where",t);return new Qd(i,r,n)}(e,n,r)))}catch(e){throw Ip(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Gd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Fd("orderBy",t);return new Wd(r,n)}(e,n)))}catch(e){throw Ip(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Gd(this._delegate,function(t){return Bf("limit",t),new Yd("limit",t,"F")}(e)))}catch(e){throw Ip(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Gd(this._delegate,function(t){return Bf("limitToLast",t),new Yd("limitToLast",t,"L")}(e)))}catch(e){throw Ip(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Gd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $d("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Ip(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Gd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $d("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Ip(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Gd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xd("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Ip(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Gd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xd("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Ip(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Xf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=qf(t,Gf);var e=qf(t.firestore,td),n=ed(e),r=new ap(e);return function(t,e){var n=this,r=new wu;return t.asyncQueue.enqueueAndForget(function(){return Object(Oi.b)(n,void 0,void 0,function(){var n;return Object(Oi.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Oi.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Oi.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Yc(t,e,!0)];case 1:return a=u.sent(),r=new Oh(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ch(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,wf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new qd(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=qf(t,Gf);var e=qf(t.firestore,td),n=ed(e),r=new ap(e);return Of(n,t._query,{source:"server"}).then(function(n){return new qd(e,r,t,n)})}(this._delegate):function(t){t=qf(t,Gf);var e=qf(t.firestore,td),n=ed(e),r=new ap(e);return zd(t._query),Of(n,t._query).then(function(n){return new qd(e,r,t,n)})}(this._delegate)).then(function(t){return new kp(e.firestore,new qd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Tp(e),i=Op(e,function(e){return new kp(t.firestore,new qd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return cp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?_p.sa(this.firestore,e):null))},t}(),xp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Sp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),kp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Ap(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Sp(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new xp(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Sp(n._firestore,r))})},t.prototype.isEqual=function(t){return Hd(this._delegate,t._delegate)},t}(),Dp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Oi.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ep(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ep(this.firestore,void 0===t?Yf(this._delegate):Yf(this._delegate,t))}catch(t){throw Ip(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=qf(t.firestore,td),r=Yf(t),i=rp(t.converter,e);return lp(n,[gd(yd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,As.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Ep(e.firestore,t)})},e.prototype.isEqual=function(t){return $f(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?_p.sa(this.firestore,t):null))},e}(Ap);function Np(t){return qf(t,Kf)}var jp,Rp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(od.bind.apply(od,Object(Oi.f)([void 0],t)))}return t.documentId=function(){return new t(Xi.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(_t.h)(t))instanceof od&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Pp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new bd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new md("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wd("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _d("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ed("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Vp=n("/6Yf"),Fp={Firestore:mp,GeoPoint:ud,Timestamp:Hi,Blob:yp,Transaction:bp,WriteBatch:wp,DocumentReference:Ep,DocumentSnapshot:Cp,Query:Ap,QueryDocumentSnapshot:Sp,QuerySnapshot:kp,CollectionReference:Dp,FieldPath:Rp,FieldValue:Pp,setLogLevel:function(t){xi.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Vp.a("firestore",function(t){return function(t,e){return new mp(t,new td(t,e),new gp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Fp)))})(jp=wt.a),jp.registerVersion("@firebase/firestore","2.3.1");var Mp=n("XNiG"),Lp=n("VRyK"),Up=n("zx2A");function qp(t,e){return"function"==typeof e?n=>n.pipe(qp((n,r)=>Object(tt.a)(t(n,r)).pipe(Object($.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Bp(t))}class Bp{constructor(t){this.project=t}call(t,e){return e.subscribe(new Hp(t,this.project))}}class Hp extends Up.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Up.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Up.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var zp=n("qgXg"),Kp=n("quSY"),Gp=n("9ppp"),Qp=n("Ylt2");class Wp extends Mp.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Yp(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Gp.a;if(this.isStopped||this.hasError?o=Kp.a.EMPTY:(this.observers.push(t),o=new Qp.a(this,t)),r&&t.add(t=new vt.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||zp.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Yp{constructor(t,e){this.time=t,this.value=e}}function $p(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Wp(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Xp=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Zp=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Jp=n("EY2u");function ty(t){return e=>0===t?Object(Jp.a)():e.lift(new ey(t))}class ey{constructor(t){if(this.total=t,this.total<0)throw new Zp}call(t,e){return e.subscribe(new ny(t,this.total))}}class ny extends st.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ry(t=null){return e=>e.lift(new iy(t))}class iy{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new oy(t,this.defaultValue))}}class oy extends st.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function sy(t=cy){return e=>e.lift(new ay(t))}class ay{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new uy(t,this.errorFactory))}}class uy extends st.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(jp){t=jp}this.destination.error(t)}}}function cy(){return new Xp}var ly=n("SpAZ");function hy(t,e){return e?qp(()=>t,e):qp(()=>t)}var fy=n("tf+s");const dy=new r.l("angularfire2.auth.use-emulator"),py=new r.l("angularfire2.auth.settings"),yy=new r.l("angularfire2.auth.tenant-id"),gy=new r.l("angularfire2.auth.langugage-code"),my=new r.l("angularfire2.auth.use-device-language"),vy=new r.l("angularfire.auth.persistence");let by=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new bt.d(i),f=Object(bt.h)(h),d=new Mp.a,p=Object(et.a)(void 0).pipe(Object(vt.b)(h.outsideAngular),qp(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object($.a)(()=>Object(bt.g)(t,i,e)),Object($.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(bt.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),$p({bufferSize:1,refCount:!1}));if(b(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(et.a)(null);else{p.pipe(function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yt((e,n)=>t(e,n,r)):ly.a,ty(1),n?ry(e):sy(()=>new Xp))}()).subscribe();const t=p.pipe(qp(t=>t.getRedirectResult().then(t=>t,()=>null)),f,$p({bufferSize:1,refCount:!1})),e=t=>new J.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(qp(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(qp(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(hy(n),Object(fy.a)(h.outsideAngular),Object(vt.b)(h.insideAngular)),this.user=t.pipe(hy(r),Object(fy.a)(h.outsideAngular),Object(vt.b)(h.insideAngular)),this.idToken=this.user.pipe(qp(t=>t?Object(tt.a)(t.getIdToken()):Object(et.a)(null))),this.idTokenResult=this.user.pipe(qp(t=>t?Object(tt.a)(t.getIdTokenResult()):Object(et.a)(null))),this.credential=Object(Lp.a)(t,d,this.authState.pipe(yt(t=>!t))).pipe(Object($.a)(t=>(null==t?void 0:t.user)?t:null),Object(fy.a)(h.outsideAngular),Object(vt.b)(h.insideAngular))}return Object(bt.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(bt.c),r.Fb(bt.b,8),r.Fb(r.u),r.Fb(r.s),r.Fb(dy,8),r.Fb(py,8),r.Fb(yy,8),r.Fb(gy,8),r.Fb(my,8),r.Fb(vy,8))},t.\u0275prov=r.vb({factory:function(){return new t(r.Fb(bt.c),r.Fb(bt.b,8),r.Fb(r.u),r.Fb(r.s),r.Fb(dy,8),r.Fb(py,8),r.Fb(yy,8),r.Fb(gy,8),r.Fb(my,8),r.Fb(vy,8))},token:t,providedIn:"any"}),t})();function wy(t,e){return function(t,e=Z.a){return new J.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function _y(t,e){return wy(t,e).pipe(Object($.a)(t=>({payload:t,type:"query"})))}function Ey(t,e){return _y(t,e).pipe(ot(void 0),at(),Object($.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Iy(t,e,n){return Ey(t,n).pipe(lt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ty(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ty(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ty(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new dt(void 0,void 0)),Object($.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Ty(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Oy(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(bt.e)(by,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Cy{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Ey(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object($.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ot(void 0),at(),yt(([t,e])=>e.length>0||!t),Object($.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(lt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Oy(t);return Iy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return _y(this.query,this.afs.schedulers.outsideAngular).pipe(Object($.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(tt.a)(this.query.get(t)).pipe(Object(vt.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Sy(this.ref.doc(t),this.afs)}}class Sy{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=jy(n,e);return new Cy(r,i,this.afs)}snapshotChanges(){return wy(this.ref,this.afs.schedulers.outsideAngular).pipe(ot(void 0),at(),Object($.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object($.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(tt.a)(this.ref.get(t)).pipe(Object(vt.b)(this.afs.schedulers.insideAngular))}}class Ay{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Ey(this.query,this.afs.schedulers.outsideAngular).pipe(Object($.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),yt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Ey(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(lt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Oy(t);return Iy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return _y(this.query,this.afs.schedulers.outsideAngular).pipe(Object($.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(tt.a)(this.query.get(t)).pipe(Object(vt.b)(this.afs.schedulers.insideAngular))}}const xy=new r.l("angularfire2.enableFirestorePersistence"),ky=new r.l("angularfire2.firestore.persistenceSettings"),Dy=new r.l("angularfire2.firestore.settings"),Ny=new r.l("angularfire2.firestore.use-emulator");function jy(t,e=(t=>t)){return{query:e(t),ref:t}}let Ry=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new bt.d(o),this.keepUnstableUntilFirst=Object(bt.h)(this.schedulers);const c=Object(bt.g)(t,o,e);!X.a.auth&&u&&Object(bt.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(bt.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!b(i)){const e=()=>{try{return Object(tt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(jp){return"undefined"!=typeof console&&console.warn(jp),Object(et.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(et.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=jy(n,e),o=this.schedulers.ngZone.run(()=>r);return new Cy(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Ay(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Sy(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(bt.c),r.Fb(bt.b,8),r.Fb(xy,8),r.Fb(Dy,8),r.Fb(r.u),r.Fb(r.s),r.Fb(ky,8),r.Fb(Ny,8),r.Fb(dy,8))},t.\u0275prov=r.vb({factory:function(){return new t(r.Fb(bt.c),r.Fb(bt.b,8),r.Fb(xy,8),r.Fb(Dy,8),r.Fb(r.u),r.Fb(r.s),r.Fb(ky,8),r.Fb(Ny,8),r.Fb(dy,8))},token:t,providedIn:"any"}),t})(),Py=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:xy,useValue:!0},{provide:ky,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.xb({type:t}),t.\u0275inj=r.wb({providers:[Ry]}),t})(),Vy=(()=>{class t{constructor(t,e){this.afs=t,this.auth=e,this.chats=[],this.user={},this.auth.authState.subscribe(t=>{console.log("Estado del usuario",t),t&&(this.user.name=t.displayName,this.user.uid=t.uid)})}loadMessages(){return this.itemsCollection=this.afs.collection("chats",t=>t.orderBy("date","asc").limitToLast(5)),this.itemsCollection.valueChanges().pipe(Object($.a)(t=>{this.chats=t}))}addMessage(t){let e={name:this.user.name,message:t,date:(new Date).getTime(),uid:this.user.uid};return this.itemsCollection.add(e)}login(t){this.auth.signInWithPopup("google"===t?new X.a.auth.GoogleAuthProvider:new X.a.auth.TwitterAuthProvider)}logout(){this.user={},this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Fb(Ry),r.Fb(by))},t.\u0275prov=r.vb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Fy=n("DH7j"),My=n("XoHu");function Ly(t,e){return new J.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(tt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Uy=new r.l("NgValueAccessor"),qy={provide:Uy,useExisting:Object(r.J)(()=>Hy),multi:!0},By=new r.l("CompositionEventMode");let Hy=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.zb(r.w),r.zb(r.h),r.zb(By,8))},t.\u0275dir=r.ub({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ib("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.pb([qy])]}),t})();const zy=new r.l("NgValidators"),Ky=new r.l("NgAsyncValidators");function Gy(t){return null!=t}function Qy(t){const e=Object(r.hb)(t)?Object(tt.a)(t):t;return Object(r.gb)(e),e}function Wy(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Yy(t,e){return e.map(e=>e(t))}function $y(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Xy(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Gy);return 0==e.length?null:function(t){return Wy(Yy(t,e))}}($y(t)):null}function Zy(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Gy);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Fy.a)(e))return Ly(e,null);if(Object(My.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ly(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Ly(t=1===t.length&&Object(Fy.a)(t[0])?t[0]:t,null).pipe(Object($.a)(t=>e(...t)))}return Ly(t,null)}(Yy(t,e).map(Qy)).pipe(Object($.a)(Wy))}}($y(t)):null}function Jy(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let tg=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Xy(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Zy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.ub({type:t}),t})(),eg=(()=>{class t extends tg{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return ng(e||t)},t.\u0275dir=r.ub({type:t,features:[r.nb]}),t})();const ng=r.Eb(eg);class rg extends tg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let ig=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.zb(rg,2))},t.\u0275dir=r.ub({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.sb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.nb]}),t})();function og(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sg(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ag(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ug="VALID",cg="INVALID",lg="PENDING",hg="DISABLED";function fg(t){return(gg(t)?t.validators:t)||null}function dg(t){return Array.isArray(t)?Xy(t):t||null}function pg(t,e){return(gg(e)?e.asyncValidators:t)||null}function yg(t){return Array.isArray(t)?Zy(t):t||null}function gg(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class mg{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=dg(this._rawValidators),this._composedAsyncValidatorFn=yg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ug}get invalid(){return this.status===cg}get pending(){return this.status==lg}get disabled(){return this.status===hg}get enabled(){return this.status!==hg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=dg(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=yg(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=lg,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=hg,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ug,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ug&&this.status!==lg||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hg:ug}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=lg,this._hasOwnPendingAsyncValidator=!0;const e=Qy(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof bg?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof wg&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.j,this.statusChanges=new r.j}_calculateStatus(){return this._allControlsDisabled()?hg:this.errors?cg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lg)?lg:this._anyControlsHaveStatus(cg)?cg:ug}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){gg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vg extends mg{constructor(t=null,e,n){super(fg(e),pg(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ag(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ag(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class bg extends mg{constructor(t,e,n){super(fg(e),pg(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof vg?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class wg extends mg{constructor(t,e,n){super(fg(e),pg(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof vg?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const _g={provide:rg,useExisting:Object(r.J)(()=>Ig)},Eg=(()=>Promise.resolve(null))();let Ig=(()=>{class t extends rg{constructor(t,e,n,i){super(),this.control=new vg,this._registered=!1,this.update=new r.j,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Hy?n=t:Object.getPrototypeOf(t.constructor)===class{}?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Jy(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Jy(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();og(e._rawValidators,n),og(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&sg(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&sg(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Eg.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Eg.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.zb(eg,9),r.zb(zy,10),r.zb(Ky,10),r.zb(Uy,10))},t.\u0275dir=r.ub({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.pb([_g]),r.nb,r.ob]}),t})(),Tg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.xb({type:t}),t.\u0275inj=r.wb({}),t})(),Og=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.xb({type:t}),t.\u0275inj=r.wb({imports:[[Tg]]}),t})(),Cg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.xb({type:t}),t.\u0275inj=r.wb({imports:[Og]}),t})();const Sg=function(t){return{"text-end":t}},Ag=function(t,e){return{badge:!0,"bg-primary":t,"bg-info":e}};function xg(t,e){if(1&t&&(r.Cb(0,"div",3),r.Cb(1,"span",3),r.Qb(2),r.Bb(),r.Cb(3,"p"),r.Qb(4),r.Bb(),r.Bb()),2&t){const t=e.$implicit,n=r.Jb();r.Kb("ngClass",r.Lb(4,Sg,n._cs.user.uid==t.uid)),r.qb(1),r.Kb("ngClass",r.Mb(6,Ag,n._cs.user.uid==t.uid,n._cs.user.uid!=t.uid)),r.qb(1),r.Sb(" ",t.name," "),r.qb(2),r.Rb(t.message)}}let kg=(()=>{class t{constructor(t){this._cs=t,this.message="",this._cs.loadMessages().subscribe(()=>{setTimeout(()=>{this.element.scrollTop=this.element.scrollHeight},20)})}ngOnInit(){this.element=document.getElementById("app-messages")}get validateUser(){return this._cs.chats.some(t=>this._cs.user.uid==t.uid)}sendMessage(){console.log(this.message),0!==this.message.length&&this._cs.addMessage(this.message).then(()=>{console.log("Mensaje enviado."),this.message=""}).catch(t=>{console.log("Error al enviar",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.zb(Vy))},t.\u0275cmp=r.tb({type:t,selectors:[["app-chat"]],decls:6,vars:2,consts:[["id","app-messages",1,"app-messages"],[3,"ngClass",4,"ngFor","ngForOf"],["name","message","placeholder","Enviar mensaje",1,"form-control","me-5",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"]],template:function(t,e){1&t&&(r.Cb(0,"h1"),r.Qb(1,"Chat"),r.Bb(),r.Ab(2,"hr"),r.Cb(3,"div",0),r.Pb(4,xg,5,9,"div",1),r.Bb(),r.Cb(5,"input",2),r.Ib("ngModelChange",function(t){return e.message=t})("keyup.enter",function(){return e.sendMessage()}),r.Bb()),2&t&&(r.qb(4),r.Kb("ngForOf",e._cs.chats),r.qb(1),r.Kb("ngModel",e.message))},directives:[d,Hy,ig,Ig,h],encapsulation:2}),t})(),Dg=(()=>{class t{constructor(t){this._ch=t}ngOnInit(){}loggin(t){this._ch.login(t)}}return t.\u0275fac=function(e){return new(e||t)(r.zb(Vy))},t.\u0275cmp=r.tb({type:t,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-me-12","text-center"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-info","ms-3",3,"click"]],template:function(t,e){1&t&&(r.Cb(0,"div",0),r.Cb(1,"div",1),r.Cb(2,"p"),r.Qb(3,"Ingrese al chat con su cuenta favorita"),r.Bb(),r.Cb(4,"button",2),r.Ib("click",function(){return e.loggin("google")}),r.Qb(5," Google "),r.Bb(),r.Cb(6,"button",3),r.Ib("click",function(){return e.loggin("twitter")}),r.Qb(7," Twitter "),r.Bb(),r.Bb(),r.Bb())},encapsulation:2}),t})();function Ng(t,e){if(1&t){const t=r.Db();r.Cb(0,"div"),r.Cb(1,"button",5),r.Ib("click",function(){return r.Nb(t),r.Jb()._cs.logout()}),r.Qb(2," LogOut "),r.Bb(),r.Bb()}}function jg(t,e){1&t&&(r.Cb(0,"div",6),r.Ab(1,"app-chat"),r.Bb())}function Rg(t,e){1&t&&r.Ab(0,"app-login")}let Pg=(()=>{class t{constructor(t){this._cs=t}}return t.\u0275fac=function(e){return new(e||t)(r.zb(Vy))},t.\u0275cmp=r.tb({type:t,selectors:[["app-root"]],decls:8,vars:3,consts:[[1,"container","main-container"],[1,"d-flex","align-items-center","justify-content-between"],[4,"ngIf"],[1,"d-flex","justify-content-center","mt-5"],["class","chat-window",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"chat-window"]],template:function(t,e){1&t&&(r.Cb(0,"div",0),r.Cb(1,"div",1),r.Cb(2,"h1"),r.Qb(3,"Firechat"),r.Bb(),r.Pb(4,Ng,3,0,"div",2),r.Bb(),r.Cb(5,"div",3),r.Pb(6,jg,2,0,"div",4),r.Bb(),r.Pb(7,Rg,1,0,"app-login",2),r.Bb()),2&t&&(r.qb(4),r.Kb("ngIf",e._cs.user.uid),r.qb(2),r.Kb("ngIf",e._cs.user.uid),r.qb(1),r.Kb("ngIf",!e._cs.user.uid))},directives:[y,kg,Dg],styles:[""]}),t})();const Vg={apiKey:"AIzaSyBo5gP_MtA3vgGZIy9ZSs_cT8SXOaTA4a8",authDomain:"firechat-4f569.firebaseapp.com",projectId:"firechat-4f569",storageBucket:"firechat-4f569.appspot.com",messagingSenderId:"179921629406",appId:"1:179921629406:web:eb41b59dcc7767e6bf524f",measurementId:"G-Q6XBMPMT5Q"};let Fg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.xb({type:t,bootstrap:[Pg]}),t.\u0275inj=r.wb({providers:[],imports:[[Y,bt.a.initializeApp(Vg),Py,Cg]]}),t})();Object(r.I)(),Q().bootstrapModule(Fg).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);